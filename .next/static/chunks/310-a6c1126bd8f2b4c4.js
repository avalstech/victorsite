"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{4810:function(e,t,n){n.d(t,{t:function(){return s}});var o=n(9676),r=n(4722),i=n(3705);let a=async e=>{let t=e.getConfig().Auth?.Cognito;(0,r.FG)(t);let n=await e.Auth.getTokens({forceRefresh:!1});(0,i.CA)(n);let{"cognito:username":o,sub:a}=n.idToken?.payload??{},s={username:o,userId:a},l=n?.signInDetails;return l&&(s.signInDetails=l),s},s=async()=>a(o.d)},7715:function(e,t,n){n.d(t,{F:function(){return ee}});var o,r,i,a,s,l,d,p,c=n(9676),u=n(4722),g=n(9262),h=n(5230),m=n(1860),f=n(9794),w=n(5795),y=n(9514),E=n(9059),A=n(5871),S=n(5638),C=n(5274);async function I(e){if(e.AccessToken){let t,n,o;let r=(0,u.xp)(e.AccessToken),i=1e3*(r.payload.iat||0),a=new Date().getTime();e.RefreshToken&&(n=e.RefreshToken),e.IdToken&&(t=(0,u.xp)(e.IdToken)),e?.NewDeviceMetadata&&(o=e.NewDeviceMetadata);let s={accessToken:r,idToken:t,refreshToken:n,clockDrift:i>0?i-a:0,deviceMetadata:o,username:e.username};e?.signInDetails&&(s.signInDetails=e.signInDetails),await C.C.setTokens({tokens:s})}else throw new S._({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}var U=n(4810),v=n(1632),R=n(5353);let O=async()=>{try{A.Xb.dispatch("auth",{event:"signedIn",data:await (0,U.t)()},"Auth",A.SQ)}catch(e){if(e.name===v.Jg)throw new R.l({name:v.sX,message:"Unable to get user session following successful sign-in.",recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."});throw e}};var P=n(4236),T=n(3110);(o=s||(s={})).EmptySignInUsername="EmptySignInUsername",o.EmptySignInPassword="EmptySignInPassword",o.CustomAuthSignInPassword="CustomAuthSignInPassword",o.EmptySignUpUsername="EmptySignUpUsername",o.EmptySignUpPassword="EmptySignUpPassword",o.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",o.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",o.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",o.EmptyChallengeResponse="EmptyChallengeResponse",o.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",o.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",o.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",o.EmptyResetPasswordUsername="EmptyResetPasswordUsername",o.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",o.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",o.IncorrectMFAMethod="IncorrectMFAMethod",o.EmptyUpdatePassword="EmptyUpdatePassword",o.InvalidPreferredChallenge="InvalidPreferredChallenge",s.EmptyChallengeResponse,s.EmptyConfirmResetPasswordUsername,s.EmptyConfirmSignUpCode,s.EmptyConfirmSignUpUsername,s.EmptyConfirmResetPasswordConfirmationCode,s.EmptyConfirmResetPasswordNewPassword,s.EmptyResendSignUpCodeUsername,s.EmptyResetPasswordUsername,s.EmptySignInPassword,s.EmptySignInUsername,s.EmptySignUpPassword,s.EmptySignUpUsername,s.CustomAuthSignInPassword,s.IncorrectMFAMethod,s.EmptyVerifyTOTPSetupCode,s.EmptyUpdatePassword,s.EmptyConfirmUserAttributeCode,s.InvalidPreferredChallenge,(r=l||(l={})).DEFAULT_MSG="Authentication Error",r.EMPTY_EMAIL="Email cannot be empty",r.EMPTY_PHONE="Phone number cannot be empty",r.EMPTY_USERNAME="Username cannot be empty",r.INVALID_USERNAME="The username should either be a string or one of the sign in types",r.EMPTY_PASSWORD="Password cannot be empty",r.EMPTY_CODE="Confirmation code cannot be empty",r.SIGN_UP_ERROR="Error creating account",r.NO_MFA="No valid MFA method provided",r.INVALID_MFA="Invalid MFA type",r.EMPTY_CHALLENGE="Challenge response cannot be empty",r.NO_USER_SESSION="Failed to get the session because the user is empty",r.NETWORK_ERROR="Network Error",r.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",r.AUTOSIGNIN_ERROR="Please use your credentials to sign in",r.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings",(i=d||(d={})).SignInException="SignInException",i.OAuthSignInError="OAuthSignInException",new T.k("AuthError");let _={oauthSignInError:{message:l.OAUTH_ERROR,log:"Make sure Cognito Hosted UI has been configured correctly"},noConfig:{message:l.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:l.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:l.EMPTY_USERNAME},invalidUsername:{message:l.INVALID_USERNAME},emptyPassword:{message:l.EMPTY_PASSWORD},emptyCode:{message:l.EMPTY_CODE},signUpError:{message:l.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:l.NO_MFA},invalidMFA:{message:l.INVALID_MFA},emptyChallengeResponse:{message:l.EMPTY_CHALLENGE},noUserSession:{message:l.NO_USER_SESSION},deviceConfig:{message:l.DEVICE_CONFIG},networkError:{message:l.NETWORK_ERROR},autoSignInError:{message:l.AUTOSIGNIN_ERROR},default:{message:l.DEFAULT_MSG}},k=(e,t)=>new R.l({message:e??"An error has occurred during the oauth process.",name:d.OAuthSignInError,recoverySuggestion:t??_.oauthSignInError.log});(a=p||(p={})).NoConfig="noConfig",a.MissingAuthConfig="missingAuthConfig",a.EmptyUsername="emptyUsername",a.InvalidUsername="invalidUsername",a.EmptyPassword="emptyPassword",a.EmptyCode="emptyCode",a.SignUpError="signUpError",a.NoMFA="noMFA",a.InvalidMFA="invalidMFA",a.EmptyChallengeResponse="emptyChallengeResponse",a.NoUserSession="noUserSession",a.Default="default",a.DeviceConfig="deviceConfig",a.NetworkError="networkError",a.AutoSignInError="autoSignInError",a.OAuthSignInError="oauthSignInError";let b=async e=>{let t=await w.V.loadOAuthState(),n=e===t?t:void 0;if(!n)throw new R.l({name:p.OAuthSignInError,message:null===e?"`signInWithRedirect` has been canceled.":"An error occurred while validating the state.",recoverySuggestion:null===e?void 0:"Try to initiate an OAuth flow from Amplify"});return n},M=async({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:o,responseType:r,domain:i,preferPrivateSession:a})=>{let s=new y.a(e),l=s.searchParams.get("error"),d=s.searchParams.get("error_description");if(l)throw k(d??l);return"code"===r?N({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:o,domain:i,preferPrivateSession:a}):F({currentUrl:e,redirectUri:o,preferPrivateSession:a})},N=async({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:o,domain:r,preferPrivateSession:i})=>{let a=new y.a(e),s=a.searchParams.get("code"),l=a.searchParams.get("state");if(!s||!l)throw k("User cancelled OAuth flow.");let d=await b(l),p=await w.V.loadPKCE(),c=Object.entries({grant_type:"authorization_code",code:s,client_id:n,redirect_uri:o,...p?{code_verifier:p}:{}}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&"),{access_token:g,refresh_token:h,id_token:m,error:f,error_message:A,token_type:S,expires_in:C}=await (await fetch("https://"+r+"/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",[E.Mt]:t},body:c})).json();if(f)throw k(A??f);let U=(g&&(0,u.xp)(g).payload.username)??"username";return await I({username:U,AccessToken:g,IdToken:m,RefreshToken:h}),D({redirectUri:o,state:d,preferPrivateSession:i})},F=async({currentUrl:e,redirectUri:t,preferPrivateSession:n})=>{let{id_token:o,access_token:r,state:i,token_type:a,expires_in:s,error_description:l,error:d}=(new y.a(e).hash??"#").substring(1).split("&").map(e=>e.split("=")).reduce((e,[t,n])=>({...e,[t]:n}),{id_token:void 0,access_token:void 0,state:void 0,token_type:void 0,expires_in:void 0,error_description:void 0,error:void 0});if(d)throw k(l??d);if(!r)throw k("No access token returned from OAuth flow.");let p=await b(i),c=(r&&(0,u.xp)(r).payload.username)??"username";return await I({username:c,AccessToken:r,IdToken:o}),D({redirectUri:t,state:p,preferPrivateSession:n})},D=async({redirectUri:e,state:t,preferPrivateSession:n})=>{await C.C.setOAuthMetadata({oauthSignIn:!0}),await w.V.clearOAuthData(),await w.V.storeOAuthSignIn(!0,n),(0,P.P)(),j(e),V(t)&&A.Xb.dispatch("auth",{event:"customOAuthState",data:(W(t).match(/.{2}/g)||[]).map(e=>String.fromCharCode(parseInt(e,16))).join("")},"Auth",A.SQ),A.Xb.dispatch("auth",{event:"signInWithRedirect"},"Auth",A.SQ),await O()},V=e=>/-/.test(e),W=e=>e.split("-").splice(1).join("-"),j=e=>{"undefined"!=typeof window&&void 0!==window.history&&window.history.replaceState(window.history.state,"",e)};var G=n(5260);let L=async e=>{(0,P.P)(),await w.V.clearOAuthInflightData(),A.Xb.dispatch("auth",{event:"signInWithRedirect_failure",data:{error:e}},"Auth",A.SQ)},x=async e=>{try{(0,u.FG)(e),(0,u.V0)(e),w.V.setAuthConfig(e)}catch(e){return}if(await w.V.loadOAuthInFlight())try{let t=window.location.href,{loginWith:n,userPoolClientId:o}=e,{domain:r,redirectSignIn:i,responseType:a}=n.oauth,s=(0,G.B)(i);await M({currentUrl:t,clientId:o,domain:r,redirectUri:s,responseType:a,userAgentValue:(0,f.W)(h.g4.SignInWithRedirect)})}catch(e){await L(e)}};(0,g.j)()&&c.d[m.w](x);let X={Google:"Google",Facebook:"Facebook",Amazon:"LoginWithAmazon",Apple:"SignInWithApple"};var Y=n(7163),H=n(8364);async function $(){let e;try{e=await (0,U.t)()}catch(e){}if(e&&e.userId&&e.username)throw new R.l({name:v.EU,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}var z=n(2237),Q=n(2614);let B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",K=e=>{let t;let n=new Uint8Array(e);(0,z.MX)().getRandomValues(n);let o="";for(let e of n)o+=B.charAt(e%B.length);return{value:o,method:"S256",toCodeChallenge:()=>t||(t=function(e){let t=new H.f;return t.update(e),Q.u.convert(t.digestSync(),{urlSafe:!0}).replace(/=/g,"")}(o))}},q=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],o=new Uint8Array(e);for(let e of((0,z.MX)().getRandomValues(o),o))n.push(t[e%t.length]);return n.join("")},J=()=>q(32),Z=e=>{async function t(n){if(n.persisted&&await e.loadOAuthInFlight()){let e=k("User cancelled OAuth flow.");await L(e)}window.removeEventListener("pageshow",t)}window.addEventListener("pageshow",t)};async function ee(e){let t;let n=c.d.getConfig().Auth?.Cognito;(0,u.FG)(n),(0,u.V0)(n),w.V.setAuthConfig(n),e?.options?.prompt||await $();let o="COGNITO";return"string"==typeof e?.provider?o=X[e.provider]:e?.provider?.custom?o=e.provider.custom:e?.provider?.idpIdentifier&&({idpIdentifier:t}=e.provider),et({oauthConfig:n.loginWith.oauth,clientId:n.userPoolClientId,provider:o,idpIdentifier:t,customState:e?.customState,preferPrivateSession:e?.options?.preferPrivateSession,options:{loginHint:e?.options?.loginHint,lang:e?.options?.lang,nonce:e?.options?.nonce,prompt:e?.options?.prompt},authSessionOpener:e?.options?.authSessionOpener})}let et=async({oauthConfig:e,provider:t,idpIdentifier:n,clientId:o,customState:r,preferPrivateSession:i,options:a,authSessionOpener:s})=>{let{domain:l,redirectSignIn:d,responseType:p,scopes:c}=e,{loginHint:u,lang:m,nonce:y,prompt:E}=a??{},A=J(),S=s||Y.A,C=r?`${A}-${r.split("").map(e=>e.charCodeAt(0).toString(16).padStart(2,"0")).join("")}`:A,{value:I,method:U,toCodeChallenge:v}=K(128),R=(0,G.B)(e.redirectSignIn);(0,g.j)()&&w.V.storeOAuthInFlight(!0),w.V.storeOAuthState(C),w.V.storePKCE(I);let O=new URLSearchParams;O.append("redirect_uri",R),O.append("response_type",p),O.append("client_id",o),n?O.append("idp_identifier",n):O.append("identity_provider",t),O.append("scope",c.join(" ")),u&&O.append("login_hint",u),m&&O.append("lang",m),y&&O.append("nonce",y),E&&O.append("prompt",E.toLowerCase()),O.append("state",C),"code"===p&&(O.append("code_challenge",v()),O.append("code_challenge_method",U));let P=`https://${l}/oauth2/authorize?${O.toString()}`;Z(w.V);let{type:T,error:_,url:b}=await S(P,d,i)??{};try{if("error"===T)throw k(String(_));if("canceled"===T)throw k(String(T));"success"===T&&b&&await M({currentUrl:b,clientId:o,domain:l,redirectUri:R,responseType:p,userAgentValue:(0,f.W)(h.g4.SignInWithRedirect),preferPrivateSession:i})}catch(e){throw await L(e),e}}},3005:function(e,t,n){n.d(t,{w:function(){return k}});var o=n(3110),r=n(9676),i=n(2876);function a(){return r.d.Auth.clearCredentials()}var s=n(5871),l=n(4722),d=n(5230),p=n(9794),c=n(5353),u=n(9653),g=n(5274),h=n(2440),m=n(3705);n(8364);let f=async e=>{await e.clearOAuthData(),g.C.clearTokens(),await a(),s.Xb.dispatch("auth",{event:"signedOut"},"Auth",s.SQ)};var w=n(7163),y=n(5260);let E=async(e,t=!1,n)=>{(0,l.V0)(e);let{loginWith:o,userPoolClientId:r}=e,{domain:i,redirectSignOut:a}=o.oauth,s=(0,y.B)(a,n),d=`https://${i}/logout?${Object.entries({client_id:r,logout_uri:encodeURIComponent(s)}).map(([e,t])=>`${e}=${t}`).join("&")}`;return(0,w.A)(d)},A=async(e,t,n,o)=>{let{isOAuthSignIn:r}=await t.loadOAuthSignIn(),i=await n.getOAuthMetadata();if(await f(t),r||i?.oauthSignIn)return E(e,!1,o)};var S=n(1632),C=n(1742),I=n(3957),U=n(8092),v=n(4724),R=n(6085);let O=e=>(0,C.z)(I.x,(0,U.u)("RevokeToken"),(0,v.o)(),{...R.n,...e}),P=e=>(0,C.z)(I.x,(0,U.u)("GlobalSignOut"),(0,v.o)(),{...R.n,...e});var T=n(9825);let _=new o.k("Auth");async function k(e){let t;let n=r.d.getConfig().Auth?.Cognito;(0,l.FG)(n),e?.global?await M(n):await b(n);try{(0,l.V0)(n),t=!0}catch(e){t=!1}if(t){let t=new u.R(i.Fm);t.setAuthConfig(n);let{type:o}=await A(n,t,g.C,e?.oauth?.redirectUrl)??{};if("error"===o)throw new c.l({name:S.wW,message:"An error occurred when attempting to log out from OAuth provider."})}else g.C.clearTokens(),await a(),s.Xb.dispatch("auth",{event:"signedOut"},"Auth",s.SQ)}async function b(e){try{let{userPoolEndpoint:t,userPoolId:n,userPoolClientId:o}=e,r=await g.C.getTokenStore().loadTokens();if((0,m.XD)(r),N(r.accessToken)){let e=O({endpointResolver:(0,T.e)({endpointOverride:t})});await e({region:(0,h.y)(n),userAgentValue:(0,p.W)(d.g4.SignOut)},{ClientId:o,Token:r.refreshToken})}}catch(e){_.debug("Client signOut error caught but will proceed with token removal")}}async function M(e){try{let{userPoolEndpoint:t,userPoolId:n}=e,o=await g.C.getTokenStore().loadTokens();(0,m.CA)(o);let r=P({endpointResolver:(0,T.e)({endpointOverride:t})});await r({region:(0,h.y)(n),userAgentValue:(0,p.W)(d.g4.SignOut)},{AccessToken:o.accessToken.toString()})}catch(e){_.debug("Global signOut error caught but will proceed with token removal")}}let N=e=>!!e?.payload?.origin_jti},5260:function(e,t,n){n.d(t,{B:function(){return r}});var o=n(1632);function r(e,t){if(t){let n=e?.find(e=>e===t);if(!n)throw o.x9;return n}{let t=e?.find(i)??e?.find(a),n=e?.find(l)??e?.find(s);if(t)return t;if(n)throw o.VL;throw o.vC}}let i=e=>e.startsWith(String(window.location.origin+(window.location.pathname||"/"))),a=e=>e.includes(String(window.location.hostname)),s=e=>e.startsWith("http://"),l=e=>e.startsWith("https://")},9794:function(e,t,n){n.d(t,{W:function(){return i}});var o=n(5548),r=n(5230);let i=(e,t)=>(0,o.Zm)({category:r.WD.Auth,action:e,...t})},7163:function(e,t,n){n.d(t,{A:function(){return o}});let o=async e=>{window?.location&&(window.location.href=e.replace("http://","https://"))}}}]);