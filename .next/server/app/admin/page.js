(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},9177:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>c,routeModule:()=>g,tree:()=>d}),a(1852),a(6442),a(996);var s=a(170),i=a(5002),n=a(3876),o=a.n(n),r=a(6299),l={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>r[e]);a.d(t,l);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1852)),"/workspaces/victorsite/src/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,6442)),"/workspaces/victorsite/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,996,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/victorsite/src/app/admin/page.tsx"],h="/admin/page",u={require:a,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},853:(e,t,a)=>{Promise.resolve().then(a.bind(a,3197))},3197:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>to});var s,i,n,o,r,l=a(7247),d=a(8964),c=a(578),h=a(6145);let u=()=>"undefined"!=typeof window&&void 0!==window.document;var g=a(1092),m=a(5738),p=a(2930);let f=(e,t)=>(0,p.Zm)({category:g.WD.Auth,action:e,...t});var y=a(4866),w=a(6013);let S={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var v=a(4358);(s||(s={})).InvalidAuthTokens="InvalidAuthTokens";let x={[s.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},k=(0,v.$)(x),A="CognitoIdentityServiceProvider";class C{getKeyValueStorage(){if(!this.keyValueStorage)throw new w.l({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{let e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new w.l({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let a=(0,h.xp)(t),s=await this.getKeyValueStorage().getItem(e.idToken),i=s?(0,h.xp)(s):void 0,n=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,o=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",r=Number.parseInt(o),l=await this.getKeyValueStorage().getItem(e.signInDetails),d={accessToken:a,idToken:i,refreshToken:n,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:r,username:await this.getLastAuthUser()};return l&&(d.signInDetails=JSON.parse(l)),d}catch(e){return null}}async storeTokens(e){k(void 0!==e,s.InvalidAuthTokens);let t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);let a=await this.getAuthKeys();await this.getKeyValueStorage().setItem(a.accessToken,e.accessToken.toString()),e.idToken?await this.getKeyValueStorage().setItem(a.idToken,e.idToken.toString()):await this.getKeyValueStorage().removeItem(a.idToken),e.refreshToken?await this.getKeyValueStorage().setItem(a.refreshToken,e.refreshToken):await this.getKeyValueStorage().removeItem(a.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(a.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(a.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(a.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails?await this.getKeyValueStorage().setItem(a.signInDetails,JSON.stringify(e.signInDetails)):await this.getKeyValueStorage().removeItem(a.signInDetails),await this.getKeyValueStorage().setItem(a.clockDrift,`${e.clockDrift}`)}async clearTokens(){let e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(e.oauthMetadata)])}async getDeviceMetadata(e){let t=await this.getAuthKeys(e),a=await this.getKeyValueStorage().getItem(t.deviceKey),s=await this.getKeyValueStorage().getItem(t.deviceGroupKey),i=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return i&&s&&a?{deviceKey:a,deviceGroupKey:s,randomPassword:i}:null}async clearDeviceMetadata(e){let t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){(0,h.FG)(this.authConfig?.Cognito);let t=e??await this.getLastAuthUser();return I(A,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){(0,h.FG)(this.authConfig?.Cognito);let e=this.authConfig.Cognito.userPoolClientId;return`${A}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(e){let{oauthMetadata:t}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(t,JSON.stringify(e))}async getOAuthMetadata(){let{oauthMetadata:e}=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e);return t&&JSON.parse(t)}}let I=(e,t)=>E(S)(`${e}`,t);function E(e){let t=Object.values({...e});return(e,a)=>t.reduce((t,s)=>({...t,[s]:`${e}.${a}.${s}`}),{})}var T=a(8013);let P="amplify-signin-with-hostedUI",N="CognitoIdentityServiceProvider";class b{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){(0,h.FG)(this.cognitoConfig);let e=j(N,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){(0,h.FG)(this.cognitoConfig);let e=j(N,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(P),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){(0,h.FG)(this.cognitoConfig);let e=j(N,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){(0,h.FG)(this.cognitoConfig);let t=j(N,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){(0,h.FG)(this.cognitoConfig);let e=j(N,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){(0,h.FG)(this.cognitoConfig);let t=j(N,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){(0,h.FG)(this.cognitoConfig);let e=j(N,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(e.inflightOAuth)==="true"}async storeOAuthInFlight(e){(0,h.FG)(this.cognitoConfig);let t=j(N,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){(0,h.FG)(this.cognitoConfig);let e=j(N,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(P),[a,s]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===a||"true"===t,preferPrivateSession:"true"===s}}async storeOAuthSignIn(e,t=!1){(0,h.FG)(this.cognitoConfig);let a=j(N,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(a.oauthSignIn,`${e},${t}`)}}let j=(e,t)=>E(T.Bx)(e,t),O=new b(y.Fm);var U=a(4727),R=a(9699),M=a(3266),K=a(101);function V(e){let t=e?.split("_")[0];if(!e||0>e.indexOf("_")||!t||"string"!=typeof t)throw new w.l({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}var _=a(7168);let D="cognito-idp",F=({region:e})=>({url:new U.a(`https://${D}.${e}.${(0,_.b)(e)}`)}),G=({endpointOverride:e})=>t=>e?{url:new U.a(e)}:F(t);var L=a(2519);let W=e=>(t,a)=>$(a,z(e),JSON.stringify(t)),z=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),$=({url:e},t,a)=>({headers:t,url:e,body:a,method:"POST"});var q=a(9911),J=a(7758);function X(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new w.l({name:J.Z.Unknown,message:"An unknown error has occurred.",underlyingError:e})}let Y=()=>async e=>{if(e.statusCode>=300){let t=await (0,q.f)(e);throw X(t),new w.l({name:t.name,message:t.message,metadata:t.$metadata})}return(0,q.e)(e)};var Z=a(3540),H=a(4716),Q=a(6591),B=a(7334),ee=a(6715),et=a(2673);let ea=(0,Z.V)(et.S,[ee.n,Q.t,H.d,B.F]),es=(0,Z.V)(ea,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]);var ei=a(9969),en=a(3790);let eo={service:D,retryDecider:(0,ei.j)(q.f),computeDelay:en.k,get userAgentValue(){return(0,p.Zm)()},cache:"no-store"},er=e=>(0,L.z)(es,W("GetTokensFromRefreshToken"),Y(),{...eo,...e}),el=(e=>{let t;return async(...a)=>t||(t=new Promise((s,i)=>{e(...a).then(e=>{s(e)}).catch(e=>{i(e)}).finally(()=>{t=void 0})}))})(async({tokens:e,authConfig:t,username:a,clientMetadata:s})=>{(0,h.FG)(t?.Cognito);let{userPoolId:i,userPoolClientId:n,userPoolEndpoint:o}=t.Cognito,r=V(i);(0,T.XD)(e);let l=er({endpointResolver:G({endpointOverride:o})}),{AuthenticationResult:d}=await l({region:r},{ClientId:n,RefreshToken:e.refreshToken,DeviceKey:e.deviceMetadata?.deviceKey,ClientMetadata:s}),c=(0,h.xp)(d?.AccessToken??""),u=d?.IdToken?(0,h.xp)(d.IdToken):void 0,{iat:g}=c.payload;if(!g)throw new w.l({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:c,idToken:u,clockDrift:1e3*g-new Date().getTime(),refreshToken:d?.RefreshToken??e.refreshToken,username:a}});function ed({expiresAt:e,clockDrift:t,tolerance:a=5e3}){return Date.now()+t+a>e}let ec=[],eh=e=>{ec.push(e)},eu=()=>{for(;ec.length;)ec.pop()?.()};class eg{constructor(){this.waitForInflightOAuth=u()?async()=>await O.loadOAuthInFlight()?(this.inflightPromise||(this.inflightPromise=new Promise((e,t)=>{eh(e)})),this.inflightPromise):void 0:async()=>{}}setAuthConfig(e){O.setAuthConfig(e.Cognito),this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}getTokenStore(){if(!this.tokenStore)throw new w.l({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new w.l({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}setClientMetadataProvider(e){this.clientMetadataProvider=e}async getTokens(e){let t;try{(0,h.FG)(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,t=await this.getTokenStore().loadTokens();let a=await this.getTokenStore().getLastAuthUser();if(null===t)return null;let s=!!t?.idToken&&ed({expiresAt:(t.idToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0}),i=ed({expiresAt:(t.accessToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0});return(e?.forceRefresh||s||i)&&null===(t=await this.refreshTokens({tokens:t,username:a,clientMetadata:e?.clientMetadata??await this.clientMetadataProvider?.()}))?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t,clientMetadata:a}){try{let{signInDetails:s}=e,i=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t,clientMetadata:a});return i.signInDetails=s,await this.setTokens({tokens:i}),M.Xb.dispatch("auth",{event:"tokenRefresh"},"Auth",M.SQ),i}catch(e){return this.handleErrors(e)}}handleErrors(e){if(X(e),this.isAuthenticationError(e)&&this.clearTokens(),M.Xb.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",M.SQ),e.name.startsWith("NotAuthorizedException"))return null;throw e}isAuthenticationError(e){return["NotAuthorizedException","TokenRevokedException","UserNotFoundException","PasswordResetRequiredException","UserNotConfirmedException","RefreshTokenReuseException"].some(t=>e?.name?.startsWith?.(t))}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}setOAuthMetadata(e){return this.getTokenStore().setOAuthMetadata(e)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class em{constructor(){this.authTokenStore=new C,this.authTokenStore.setKeyValueStorage(y.Fm),this.tokenOrchestrator=new eg,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(el)}getTokens(e={}){return this.tokenOrchestrator.getTokens(e)}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setClientMetadataProvider(e){this.tokenOrchestrator.setClientMetadataProvider(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}}let{tokenOrchestrator:ep}=new em;async function ef(e){if(e.AccessToken){let t,a,s;let i=(0,h.xp)(e.AccessToken),n=1e3*(i.payload.iat||0),o=new Date().getTime();e.RefreshToken&&(a=e.RefreshToken),e.IdToken&&(t=(0,h.xp)(e.IdToken)),e?.NewDeviceMetadata&&(s=e.NewDeviceMetadata);let r={accessToken:i,idToken:t,refreshToken:a,clockDrift:n>0?n-o:0,deviceMetadata:s,username:e.username};e?.signInDetails&&(r.signInDetails=e.signInDetails),await ep.setTokens({tokens:r})}else throw new K._({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}var ey=a(933),ew=a(4340);let eS=async()=>{try{M.Xb.dispatch("auth",{event:"signedIn",data:await (0,ey.t)()},"Auth",M.SQ)}catch(e){if(e.name===ew.Jg)throw new w.l({name:ew.sX,message:"Unable to get user session following successful sign-in.",recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."});throw e}};var ev=a(431);(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword",e.InvalidPreferredChallenge="InvalidPreferredChallenge"})(i||(i={})),i.EmptyChallengeResponse,i.EmptyConfirmResetPasswordUsername,i.EmptyConfirmSignUpCode,i.EmptyConfirmSignUpUsername,i.EmptyConfirmResetPasswordConfirmationCode,i.EmptyConfirmResetPasswordNewPassword,i.EmptyResendSignUpCodeUsername,i.EmptyResetPasswordUsername,i.EmptySignInPassword,i.EmptySignInUsername,i.EmptySignUpPassword,i.EmptySignUpUsername,i.CustomAuthSignInPassword,i.IncorrectMFAMethod,i.EmptyVerifyTOTPSetupCode,i.EmptyUpdatePassword,i.EmptyConfirmUserAttributeCode,i.InvalidPreferredChallenge,function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"}(n||(n={})),function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"}(o||(o={})),new ev.k("AuthError");let ex={oauthSignInError:{message:n.OAUTH_ERROR,log:"Make sure Cognito Hosted UI has been configured correctly"},noConfig:{message:n.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:n.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:n.EMPTY_USERNAME},invalidUsername:{message:n.INVALID_USERNAME},emptyPassword:{message:n.EMPTY_PASSWORD},emptyCode:{message:n.EMPTY_CODE},signUpError:{message:n.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:n.NO_MFA},invalidMFA:{message:n.INVALID_MFA},emptyChallengeResponse:{message:n.EMPTY_CHALLENGE},noUserSession:{message:n.NO_USER_SESSION},deviceConfig:{message:n.DEVICE_CONFIG},networkError:{message:n.NETWORK_ERROR},autoSignInError:{message:n.AUTOSIGNIN_ERROR},default:{message:n.DEFAULT_MSG}},ek=(e,t)=>new w.l({message:e??"An error has occurred during the oauth process.",name:o.OAuthSignInError,recoverySuggestion:t??ex.oauthSignInError.log});!function(e){e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",e.AutoSignInError="autoSignInError",e.OAuthSignInError="oauthSignInError"}(r||(r={}));let eA=async e=>{let t=await O.loadOAuthState(),a=e===t?t:void 0;if(!a)throw new w.l({name:r.OAuthSignInError,message:null===e?"`signInWithRedirect` has been canceled.":"An error occurred while validating the state.",recoverySuggestion:null===e?void 0:"Try to initiate an OAuth flow from Amplify"});return a},eC=async({currentUrl:e,userAgentValue:t,clientId:a,redirectUri:s,responseType:i,domain:n,preferPrivateSession:o})=>{let r=new U.a(e),l=r.searchParams.get("error"),d=r.searchParams.get("error_description");if(l)throw ek(d??l);return"code"===i?eI({currentUrl:e,userAgentValue:t,clientId:a,redirectUri:s,domain:n,preferPrivateSession:o}):eE({currentUrl:e,redirectUri:s,preferPrivateSession:o})},eI=async({currentUrl:e,userAgentValue:t,clientId:a,redirectUri:s,domain:i,preferPrivateSession:n})=>{let o=new U.a(e),r=o.searchParams.get("code"),l=o.searchParams.get("state");if(!r||!l)throw ek("User cancelled OAuth flow.");let d=await eA(l),c=await O.loadPKCE(),u=Object.entries({grant_type:"authorization_code",code:r,client_id:a,redirect_uri:s,...c?{code_verifier:c}:{}}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&"),{access_token:g,refresh_token:m,id_token:p,error:f,error_message:y,token_type:w,expires_in:S}=await (await fetch("https://"+i+"/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",[R.Mt]:t},body:u})).json();if(f)throw ek(y??f);let v=(g&&(0,h.xp)(g).payload.username)??"username";return await ef({username:v,AccessToken:g,IdToken:p,RefreshToken:m}),eT({redirectUri:s,state:d,preferPrivateSession:n})},eE=async({currentUrl:e,redirectUri:t,preferPrivateSession:a})=>{let{id_token:s,access_token:i,state:n,token_type:o,expires_in:r,error_description:l,error:d}=(new U.a(e).hash??"#").substring(1).split("&").map(e=>e.split("=")).reduce((e,[t,a])=>({...e,[t]:a}),{id_token:void 0,access_token:void 0,state:void 0,token_type:void 0,expires_in:void 0,error_description:void 0,error:void 0});if(d)throw ek(l??d);if(!i)throw ek("No access token returned from OAuth flow.");let c=await eA(n),u=(i&&(0,h.xp)(i).payload.username)??"username";return await ef({username:u,AccessToken:i,IdToken:s}),eT({redirectUri:t,state:c,preferPrivateSession:a})},eT=async({redirectUri:e,state:t,preferPrivateSession:a})=>{await ep.setOAuthMetadata({oauthSignIn:!0}),await O.clearOAuthData(),await O.storeOAuthSignIn(!0,a),eu(),eb(e),eP(t)&&M.Xb.dispatch("auth",{event:"customOAuthState",data:(eN(t).match(/.{2}/g)||[]).map(e=>String.fromCharCode(parseInt(e,16))).join("")},"Auth",M.SQ),M.Xb.dispatch("auth",{event:"signInWithRedirect"},"Auth",M.SQ),await eS()},eP=e=>/-/.test(e),eN=e=>e.split("-").splice(1).join("-"),eb=e=>{"undefined"!=typeof window&&void 0!==window.history&&window.history.replaceState(window.history.state,"",e)};function ej(e,t){if(t){let a=e?.find(e=>e===t);if(!a)throw ew.x9;return a}{let t=e?.find(eO)??e?.find(eU),a=e?.find(eM)??e?.find(eR);if(t)return t;if(a)throw ew.VL;throw ew.vC}}let eO=e=>e.startsWith(String(window.location.origin+(window.location.pathname||"/"))),eU=e=>e.includes(String(window.location.hostname)),eR=e=>e.startsWith("http://"),eM=e=>e.startsWith("https://"),eK=async e=>{eu(),await O.clearOAuthInflightData(),M.Xb.dispatch("auth",{event:"signInWithRedirect_failure",data:{error:e}},"Auth",M.SQ)},eV=async e=>{try{(0,h.FG)(e),(0,h.V0)(e),O.setAuthConfig(e)}catch(e){return}if(await O.loadOAuthInFlight())try{let t=window.location.href,{loginWith:a,userPoolClientId:s}=e,{domain:i,redirectSignIn:n,responseType:o}=a.oauth,r=ej(n);await eC({currentUrl:t,clientId:s,domain:i,redirectUri:r,responseType:o,userAgentValue:f(g.g4.SignInWithRedirect)})}catch(e){await eK(e)}};u()&&c.d[m.w](eV);let e_={Google:"Google",Facebook:"Facebook",Amazon:"LoginWithAmazon",Apple:"SignInWithApple"},eD=async e=>{window?.location&&(window.location.href=e.replace("http://","https://"))};var eF=a(5266);async function eG(){let e;try{e=await (0,ey.t)()}catch(e){}if(e&&e.userId&&e.username)throw new w.l({name:ew.EU,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}var eL=a(1419),eW=a(1640);let ez="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e$=e=>{let t;let a=new Uint8Array(e);(0,eL.MX)().getRandomValues(a);let s="";for(let e of a)s+=ez.charAt(e%ez.length);return{value:s,method:"S256",toCodeChallenge:()=>t||(t=function(e){let t=new eF.f;return t.update(e),eW.u.convert(t.digestSync(),{urlSafe:!0}).replace(/=/g,"")}(s))}},eq=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=[],s=new Uint8Array(e);for(let e of((0,eL.MX)().getRandomValues(s),s))a.push(t[e%t.length]);return a.join("")},eJ=()=>eq(32),eX=e=>{async function t(a){if(a.persisted&&await e.loadOAuthInFlight()){let e=ek("User cancelled OAuth flow.");await eK(e)}window.removeEventListener("pageshow",t)}window.addEventListener("pageshow",t)};async function eY(e){let t;let a=c.d.getConfig().Auth?.Cognito;(0,h.FG)(a),(0,h.V0)(a),O.setAuthConfig(a),e?.options?.prompt||await eG();let s="COGNITO";return"string"==typeof e?.provider?s=e_[e.provider]:e?.provider?.custom?s=e.provider.custom:e?.provider?.idpIdentifier&&({idpIdentifier:t}=e.provider),eZ({oauthConfig:a.loginWith.oauth,clientId:a.userPoolClientId,provider:s,idpIdentifier:t,customState:e?.customState,preferPrivateSession:e?.options?.preferPrivateSession,options:{loginHint:e?.options?.loginHint,lang:e?.options?.lang,nonce:e?.options?.nonce,prompt:e?.options?.prompt},authSessionOpener:e?.options?.authSessionOpener})}let eZ=async({oauthConfig:e,provider:t,idpIdentifier:a,clientId:s,customState:i,preferPrivateSession:n,options:o,authSessionOpener:r})=>{let{domain:l,redirectSignIn:d,responseType:c,scopes:h}=e,{loginHint:m,lang:p,nonce:y,prompt:w}=o??{},S=eJ(),v=i?`${S}-${i.split("").map(e=>e.charCodeAt(0).toString(16).padStart(2,"0")).join("")}`:S,{value:x,method:k,toCodeChallenge:A}=e$(128),C=ej(e.redirectSignIn);u()&&O.storeOAuthInFlight(!0),O.storeOAuthState(v),O.storePKCE(x);let I=new URLSearchParams;I.append("redirect_uri",C),I.append("response_type",c),I.append("client_id",s),a?I.append("idp_identifier",a):I.append("identity_provider",t),I.append("scope",h.join(" ")),m&&I.append("login_hint",m),p&&I.append("lang",p),y&&I.append("nonce",y),w&&I.append("prompt",w.toLowerCase()),I.append("state",v),"code"===c&&(I.append("code_challenge",A()),I.append("code_challenge_method",k));let E=`https://${l}/oauth2/authorize?${I.toString()}`;eX(O);let{type:T,error:P,url:N}=await (r||eD)(E,d,n)??{};try{if("error"===T)throw ek(String(P));if("canceled"===T)throw ek(String(T));"success"===T&&N&&await eC({currentUrl:N,clientId:s,domain:l,redirectUri:C,responseType:c,userAgentValue:f(g.g4.SignInWithRedirect),preferPrivateSession:n})}catch(e){throw await eK(e),e}};function eH(){return c.d.Auth.clearCredentials()}let eQ=async e=>{await e.clearOAuthData(),ep.clearTokens(),await eH(),M.Xb.dispatch("auth",{event:"signedOut"},"Auth",M.SQ)},eB=async(e,t=!1,a)=>{(0,h.V0)(e);let{loginWith:s,userPoolClientId:i}=e,{domain:n,redirectSignOut:o}=s.oauth,r=ej(o,a);return eD(`https://${n}/logout?${Object.entries({client_id:i,logout_uri:encodeURIComponent(r)}).map(([e,t])=>`${e}=${t}`).join("&")}`)},e0=async(e,t,a,s)=>{let{isOAuthSignIn:i}=await t.loadOAuthSignIn(),n=await a.getOAuthMetadata();if(await eQ(t),i||n?.oauthSignIn)return eB(e,!1,s)},e1=e=>(0,L.z)(es,W("RevokeToken"),Y(),{...eo,...e}),e2=e=>(0,L.z)(es,W("GlobalSignOut"),Y(),{...eo,...e}),e6=new ev.k("Auth");async function e3(e){let t;let a=c.d.getConfig().Auth?.Cognito;(0,h.FG)(a),e?.global?await e9(a):await e5(a);try{(0,h.V0)(a),t=!0}catch(e){t=!1}if(t){let t=new b(y.Fm);t.setAuthConfig(a);let{type:s}=await e0(a,t,ep,e?.oauth?.redirectUrl)??{};if("error"===s)throw new w.l({name:ew.wW,message:"An error occurred when attempting to log out from OAuth provider."})}else ep.clearTokens(),await eH(),M.Xb.dispatch("auth",{event:"signedOut"},"Auth",M.SQ)}async function e5(e){try{let{userPoolEndpoint:t,userPoolId:a,userPoolClientId:s}=e,i=await ep.getTokenStore().loadTokens();if((0,T.XD)(i),e7(i.accessToken)){let e=e1({endpointResolver:G({endpointOverride:t})});await e({region:V(a),userAgentValue:f(g.g4.SignOut)},{ClientId:s,Token:i.refreshToken})}}catch(e){e6.debug("Client signOut error caught but will proceed with token removal")}}async function e9(e){try{let{userPoolEndpoint:t,userPoolId:a}=e,s=await ep.getTokenStore().loadTokens();(0,T.CA)(s);let i=e2({endpointResolver:G({endpointOverride:t})});await i({region:V(a),userAgentValue:f(g.g4.SignOut)},{AccessToken:s.accessToken.toString()})}catch(e){e6.debug("Global signOut error caught but will proceed with token removal")}}let e7=e=>!!e?.payload?.origin_jti;var e8=a(9298);async function e4(){try{let e=await (0,ey.t)(),t=await (0,e8.y)(),a=t.tokens?.accessToken?.payload["cognito:groups"]??[];return{user:e,groups:a}}catch{return null}}function te(e,t){let a=e??[];return"Admin"===t?a.includes("Admin"):a.includes("Admin")||a.includes("Editor")}var tt=a(8876),ta=a(5757),ts=a(8852),ti=a(9906),tn=a(7818);function to(){let[e,t]=(0,d.useState)(!0),[a,s]=(0,d.useState)(!1),[i,n]=(0,d.useState)(!1),[o,r]=(0,d.useState)({leadsNew:0,subsConfirmed:0,topPages:[]}),c=(0,d.useCallback)(async()=>{t(!0);try{let e=await e4();if(!e){s(!1),n(!1);return}if(s(!0),n(te(e.groups,"Editor")),!te(e.groups,"Editor"))return;let[t,a,i]=await Promise.all([tt.W.models.Lead.list({filter:{status:{eq:"NEW"}},limit:200}),tt.W.models.NewsletterSubscriber.list({filter:{status:{eq:"CONFIRMED"}},limit:200}),tt.W.models.PageView.list({limit:200})]),o=new Map;(i.data??[]).forEach(e=>o.set(e.path,(o.get(e.path)??0)+1));let l=Array.from(o.entries()).sort((e,t)=>t[1]-e[1]).slice(0,8).map(([e,t])=>({path:e,count:t}));r({leadsNew:(t.data??[]).length,subsConfirmed:(a.data??[]).length,topPages:l})}catch(e){tn.Am.error(e?.message??"Failed to load dashboard")}finally{t(!1)}},[]),h=async()=>{await eY({provider:"Google"}).catch(()=>eY())},u=async()=>{await e3(),tn.Am.success("Signed out"),await c()};return e?l.jsx("div",{className:"rounded-2xl bg-slate-50 p-10 text-slate-600",children:"Loading…"}):a?i?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-end justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:"Dashboard"}),l.jsx("p",{className:"mt-2 text-slate-600",children:"Content, leads, newsletter, and analytics."})]}),l.jsx(ts.z,{variant:"outline",onClick:u,children:"Sign out"})]}),(0,l.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,l.jsxs)(ta.Zb,{className:"p-5",children:[l.jsx("div",{className:"text-xs text-slate-600",children:"New leads"}),l.jsx("div",{className:"mt-1 text-3xl font-semibold",children:o.leadsNew})]}),(0,l.jsxs)(ta.Zb,{className:"p-5",children:[l.jsx("div",{className:"text-xs text-slate-600",children:"Newsletter subscribers"}),l.jsx("div",{className:"mt-1 text-3xl font-semibold",children:o.subsConfirmed})]}),(0,l.jsxs)(ta.Zb,{className:"p-5",children:[l.jsx("div",{className:"text-xs text-slate-600",children:"Top pages"}),(0,l.jsxs)("div",{className:"mt-2 space-y-1 text-sm",children:[o.topPages.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-xl bg-slate-50 px-3 py-2",children:[l.jsx("span",{className:"font-medium",children:e.path}),l.jsx("span",{className:"text-slate-600",children:e.count})]},e.path)),0===o.topPages.length?l.jsx("div",{className:"text-slate-500",children:"No data yet."}):null]})]})]}),(0,l.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[l.jsx(tr,{title:"Blog Posts",model:"BlogPost"}),l.jsx(tr,{title:"Case Studies",model:"CaseStudy"}),l.jsx(tr,{title:"Services",model:"Service"}),l.jsx(tr,{title:"Testimonials",model:"Testimonial"})]}),l.jsx(td,{}),l.jsx(tc,{})]}):(0,l.jsxs)(ta.Zb,{className:"p-8",children:[l.jsx("div",{className:"text-2xl font-semibold",children:"Access denied"}),l.jsx("p",{className:"mt-2 text-slate-600",children:"Your account does not have Editor/Admin permissions."}),(0,l.jsxs)("div",{className:"mt-6 flex gap-2",children:[l.jsx(ts.z,{onClick:u,variant:"outline",children:"Sign out"}),l.jsx(ti.default,{href:"/",children:l.jsx(ts.z,{children:"Back home"})})]})]}):(0,l.jsxs)(ta.Zb,{className:"p-8",children:[l.jsx("div",{className:"text-2xl font-semibold",children:"Admin Dashboard"}),l.jsx("p",{className:"mt-2 text-slate-600",children:"Sign in to manage site content and analytics."}),(0,l.jsxs)("div",{className:"mt-6 flex gap-2",children:[l.jsx(ts.z,{onClick:h,children:"Sign in"}),l.jsx(ti.default,{href:"/",children:l.jsx(ts.z,{variant:"outline",children:"Back home"})})]})]})}function tr({title:e,model:t}){let[a,s]=(0,d.useState)(!0),[i,n]=(0,d.useState)([]),[o,r]=(0,d.useState)(!1),c=(0,d.useCallback)(async()=>{s(!0),n((await tt.W.models[t].list({limit:50})).data??[]),s(!1)},[t]);return(0,l.jsxs)(ta.Zb,{children:[(0,l.jsxs)(ta.Ol,{className:"flex flex-row items-center justify-between",children:[l.jsx("div",{className:"text-sm font-semibold",children:e}),l.jsx(ts.z,{size:"sm",onClick:()=>r(e=>!e),children:o?"Hide":"Manage"})]}),(0,l.jsxs)(ta.aY,{children:[a?l.jsx("div",{className:"text-sm text-slate-600",children:"Loading…"}):null,a||o?null:(0,l.jsxs)("div",{className:"text-sm text-slate-600",children:[i.length," items"]}),!a&&o?(0,l.jsxs)("div",{className:"space-y-2",children:[i.map(e=>l.jsx("div",{className:"rounded-xl border border-slate-200 p-3",children:(0,l.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,l.jsxs)("div",{children:[l.jsx("div",{className:"text-sm font-semibold",children:e.title??e.name}),l.jsx("div",{className:"text-xs text-slate-600",children:e.status??e.category??""})]}),l.jsx("div",{className:"flex gap-2",children:l.jsx(ts.z,{size:"sm",variant:"outline",onClick:async()=>{await tt.W.models[t].delete({id:e.id}),await tt.W.models.AuditLog.create({action:"DELETE",entity:t,entityId:e.id,metaJson:JSON.stringify({title:e.title??e.name})}),tn.Am.success("Deleted"),c()},children:"Delete"})})]})},e.id)),l.jsx("div",{className:"rounded-xl bg-slate-50 p-3 text-xs text-slate-600",children:"Create/edit is done via quick JSON import below for speed. (Still validated + audited.)"}),l.jsx(tl,{model:t,onDone:c})]}):null]})]})}function tl({model:e,onDone:t}){let[a,s]=(0,d.useState)(""),i=async()=>{try{let i=JSON.parse(a),n=await tt.W.models[e].upsert(i);await tt.W.models.AuditLog.create({action:"UPSERT",entity:e,entityId:n.data?.id??"",metaJson:JSON.stringify({})}),tn.Am.success("Saved"),s(""),t()}catch(e){tn.Am.error(e?.message??"Invalid JSON")}};return(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx("textarea",{className:"min-h-[140px] w-full rounded-xl border border-slate-200 p-3 text-xs font-mono",value:a,onChange:e=>s(e.target.value),placeholder:'{"id":"...","title":"..."}'}),l.jsx(ts.z,{onClick:i,children:"Upsert"})]})}function td(){let[e,t]=(0,d.useState)([]),[a,s]=(0,d.useState)(!0),i=async()=>{s(!0),t(((await tt.W.models.Lead.list({limit:100})).data??[]).sort((e,t)=>(t.createdAt??"").localeCompare(e.createdAt??""))),s(!1)};return(0,l.jsxs)(ta.Zb,{children:[(0,l.jsxs)(ta.Ol,{className:"flex flex-row items-center justify-between",children:[l.jsx("div",{className:"text-sm font-semibold",children:"Leads"}),l.jsx(ts.z,{size:"sm",variant:"outline",onClick:i,children:"Refresh"})]}),(0,l.jsxs)(ta.aY,{children:[a?l.jsx("div",{className:"text-sm text-slate-600",children:"Loading…"}):null,a||0!==e.length?null:l.jsx("div",{className:"rounded-2xl bg-slate-50 p-6 text-sm text-slate-600",children:"No leads yet."}),l.jsx("div",{className:"grid gap-2",children:e.slice(0,25).map(e=>l.jsx("div",{className:"rounded-2xl border border-slate-200 p-4",children:(0,l.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"font-semibold",children:[e.name," ",(0,l.jsxs)("span",{className:"text-slate-500 text-sm",children:["(",e.email,")"]})]}),(0,l.jsxs)("div",{className:"text-xs text-brand-700 font-semibold",children:[e.inquiryType," • ",e.status]}),l.jsx("div",{className:"mt-2 text-sm text-slate-700 whitespace-pre-wrap",children:e.message})]}),l.jsx("div",{className:"flex gap-2",children:l.jsx(ts.z,{size:"sm",onClick:async()=>{await tt.W.models.Lead.update({id:e.id,status:"CONTACTED"}),await tt.W.models.AuditLog.create({action:"UPDATE",entity:"Lead",entityId:e.id,metaJson:JSON.stringify({status:"CONTACTED"})}),tn.Am.success("Marked contacted"),i()},children:"Mark contacted"})})]})},e.id))})]})]})}function tc(){let[e,t]=(0,d.useState)([]),a=async()=>{t(((await tt.W.models.Outbox.list({limit:50})).data??[]).sort((e,t)=>(t.createdAt??"").localeCompare(e.createdAt??"")))};return(0,l.jsxs)(ta.Zb,{children:[(0,l.jsxs)(ta.Ol,{className:"flex flex-row items-center justify-between",children:[l.jsx("div",{className:"text-sm font-semibold",children:"Email Outbox"}),l.jsx(ts.z,{size:"sm",variant:"outline",onClick:a,children:"Refresh"})]}),l.jsx(ta.aY,{children:(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[e.map(e=>(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 p-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"font-semibold",children:e.type}),l.jsx("div",{className:"text-xs text-slate-600",children:e.status})]}),l.jsx("div",{className:"mt-1 text-xs text-slate-600 line-clamp-2",children:e.payloadJson})]},e.id)),0===e.length?l.jsx("div",{className:"rounded-2xl bg-slate-50 p-6 text-sm text-slate-600",children:"No outbox jobs."}):null]})})]})}},1852:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(5347).createProxy)(String.raw`/workspaces/victorsite/src/app/admin/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[379,586,935,536],()=>a(9177));module.exports=s})();