"use strict";exports.id=875,exports.ids=[875],exports.modules={1101:(e,t,n)=>{let r;n.d(t,{d:()=>oC}),function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"}(f||(f={}));let i={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class o{constructor(e,t=f.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){let e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e&&(this._config=e),this._config}_log(e,...t){let n=this.level;o.LOG_LEVEL&&(n=o.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(n=window.LOG_LEVEL);let r=i[n];if(!(i[e]>=r))return;let s=console.log.bind(console);e===f.ERROR&&console.error&&(s=console.error.bind(console)),e===f.WARN&&console.warn&&(s=console.warn.bind(console)),o.BIND_ALL_LOG_LEVELS&&(e===f.INFO&&console.info&&(s=console.info.bind(console)),e===f.DEBUG&&console.debug&&(s=console.debug.bind(console)));let a=`[${e}] ${this._ts()} ${this.name}`,c="";if(1===t.length&&"string"==typeof t[0])s(c=`${a} - ${t[0]}`);else if(1===t.length)c=`${a} ${t[0]}`,s(a,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),c=`${a} - ${t[0]} ${e}`,s(`${a} - ${t[0]}`,e)}else c=`${a} ${t}`,s(a,t);for(let e of this._pluggables){let t={message:c,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(f.INFO,...e)}info(...e){this._log(f.INFO,...e)}warn(...e){this._log(f.WARN,...e)}error(...e){this._log(f.ERROR,...e)}debug(...e){this._log(f.DEBUG,...e)}verbose(...e){this._log(f.VERBOSE,...e)}addPluggable(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}o.LOG_LEVEL=null,o.BIND_ALL_LOG_LEVELS=!1;class s extends Error{constructor({message:e,name:t,recoverySuggestion:n,underlyingError:r,metadata:i}){if(super(e),this.name=t,this.underlyingError=r,this.recoverySuggestion=n,i){let{extendedRequestId:e,httpStatusCode:t,requestId:n}=i;this.metadata={extendedRequestId:e,httpStatusCode:t,requestId:n}}this.constructor=s,Object.setPrototypeOf(this,s.prototype)}}let a="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",c=new o("Hub");class u{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){let n=this.listeners.get(e);if(!n){c.warn(`No listeners for ${e}`);return}this.listeners.set(e,[...n.filter(({callback:e})=>e!==t)])}dispatch(e,t,n,r){"string"==typeof e&&this.protectedChannels.indexOf(e)>-1&&r!==a&&c.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`);let i={channel:e,payload:{...t},source:n,patternInfo:[]};try{this._toListeners(i)}catch(e){c.error(e)}}listen(e,t,n="noname"){if("function"!=typeof t)throw new s({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});let r=this.listeners.get(e);return r||(r=[],this.listeners.set(e,r)),r.push({name:n,callback:t}),()=>{this._remove(e,t)}}_toListeners(e){let{channel:t,payload:n}=e,r=this.listeners.get(t);r&&r.forEach(r=>{c.debug(`Dispatching to ${t} with `,n);try{r.callback(e)}catch(e){c.error(e)}})}}let l=new u("__default__");function p(e){return"function"==typeof e}function d(e){return function(t){if(p(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}new u("internal-hub"),Symbol();var f,h,y,m,g,b,v,E,S,T,N,A,O,w,_,I,C,k,R,D,x,P,L,M,U,j,F=function(e,t){return(F=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function $(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}F(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function B(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function G(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function V(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function q(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function W(e){return this instanceof W?(this.v=e,this):new W(e)}Object.create,Object.create;var z=("function"==typeof SuppressedError&&SuppressedError,function(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Y(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Q=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,n,r,i,o=this._parentage;if(o){if(this._parentage=null,Array.isArray(o))try{for(var s=V(o),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this)}var c=this.initialTeardown;if(p(c))try{c()}catch(e){i=e instanceof z?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=V(u),d=l.next();!d.done;d=l.next()){var f=d.value;try{H(f)}catch(e){i=null!=i?i:[],e instanceof z?i=q(q([],K(i)),K(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new z(i)}},t.prototype.add=function(e){var n;if(e&&e!==this){if(this.closed)H(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Y(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Y(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function J(e){return e instanceof Q||e&&"closed"in e&&p(e.remove)&&p(e.add)&&p(e.unsubscribe)}function H(e){p(e)?e():e.unsubscribe()}Q.EMPTY;var X={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Z.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,q([e,t],K(n))):setTimeout.apply(void 0,q([e,t],K(n)))},clearTimeout:function(e){var t=Z.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ee(e){Z.setTimeout(function(){var t=X.onUnhandledError;if(t)t(e);else throw e})}function et(){}var en=er("C",void 0,void 0);function er(e,t,n){return{kind:e,value:t,error:n}}var ei=null,eo=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,J(t)&&t.add(n)):n.destination=ed,n}return $(t,e),t.create=function(e,t,n){return new eu(e,t,n)},t.prototype.next=function(e){this.isStopped?ep(er("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?ep(er("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?ep(en,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Q),es=Function.prototype.bind;function ea(e,t){return es.call(e,t)}var ec=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){el(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){el(e)}else el(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){el(e)}},e}(),eu=function(e){function t(t,n,r){var i,o,s=e.call(this)||this;return p(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&X.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&ea(t.next,o),error:t.error&&ea(t.error,o),complete:t.complete&&ea(t.complete,o)}):i=t,s.destination=new ec(i),s}return $(t,e),t}(eo);function el(e){X.useDeprecatedSynchronousErrorHandling?X.useDeprecatedSynchronousErrorHandling&&ei&&(ei.errorThrown=!0,ei.error=e):ee(e)}function ep(e,t){var n=X.onStoppedNotification;n&&Z.setTimeout(function(){return n(e,t)})}var ed={closed:!0,next:et,error:function(e){throw e},complete:et};function ef(e,t,n,r,i){return new eh(e,t,n,r,i)}var eh=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return $(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(eo);function ey(e,t){return d(function(n,r){var i,o,s,a=0;n.subscribe(new eh(r,function(n){r.next(e.call(t,n,a++))},void 0,void 0,void 0))})}function em(e){let t=new Set;for(let n of e.attributes||[]){if(n?.type==="auth"&&"object"==typeof n?.properties&&Array.isArray(n?.properties?.rules)&&(n?.properties?.rules).every(e=>!!e.allow))for(let e of n.properties.rules)"owner"===e.allow?t.add(e.ownerField||"owner"):"groups"===e.allow&&void 0!==e.groupsField&&t.add(e.groupsField)}return Array.from(t)}function eg(e){return`${e[0].toUpperCase()}${e.slice(1)}`}function eb(e){let t,n;let r=new Promise((e,r)=>{t=e,n=r});return e(r).then(e=>{t(e)}).catch(e=>{n(e)}),r}let ev=new WeakMap;function eE(e,t){return ev.set(t,e),e.finally(()=>{ev.delete(t)})}let eS={HAS_ONE:"HAS_ONE",HAS_MANY:"HAS_MANY",BELONGS_TO:"BELONGS_TO"},eT={ID:"ID",String:"String",AWSDate:"String",AWSTime:"String",AWSDateTime:"String",AWSTimestamp:"Int",AWSEmail:"String",AWSPhone:"String",AWSURL:"String",AWSIPAddress:"String",AWSJSON:"String",Boolean:"Boolean",Int:"Int",Float:"Float"},eN=e=>1===e.length?e[0]:e.reduce((e,t,n)=>0===n?t:e+eg(t),""),eA=(e,t,n)=>{if(!n)return null;let r={};for(let[i,o]of Object.entries(n)){let n=t?e.models[t]?.fields[i]:void 0,s={fieldDef:n,value:o};(function(e){return"object"==typeof e.fieldDef?.type&&"model"in e.fieldDef.type&&"string"==typeof e.fieldDef.type.model&&e.fieldDef.isArray&&Array.isArray(e.value?.items)})(s)?r[i]=s.value.items.map(t=>eA(e,s.fieldDef.type.model,t)):function(e){return"object"==typeof e?.type&&"model"in e.type&&"string"==typeof e.type.model}(n)?r[i]=eA(e,n.type.model,o):r[i]=o}return r};function eO(e,t,n,r,i,o,s=!1){let a=r.models[t],c=a.fields,u=Object.entries(c).filter(([e,t])=>t?.type?.model!==void 0).map(([e])=>e);return n.map(t=>{if(null==t)return t;let n={};for(let l of u){let u=c[l],p=(u?.type).model,d=r.models[p],f=d.primaryKeyInfo.primaryKeyFieldName,h=d.primaryKeyInfo.sortKeyFieldNames,y=u.association?.connectionType,m=[];u.association&&"associatedWith"in u.association&&(m=u.association.associatedWith);let g=[];switch(u.association&&"targetNames"in u.association&&g.push(...u.association.targetNames),y){case eS.BELONGS_TO:{let r=h.reduce((e,n)=>(t[n]&&(e[n]=t[n]),e),{});if(e.models[p]?.get===void 0)break;s?n[l]=(n,s)=>t[g[0]]?e.models[p].get(n,{[f]:t[g[0]],...r},{authMode:s?.authMode||i,authToken:s?.authToken||o}):{data:null}:n[l]=n=>t[g[0]]?e.models[p].get({[f]:t[g[0]],...r},{authMode:n?.authMode||i,authToken:n?.authToken||o}):{data:null};break}case eS.HAS_ONE:case eS.HAS_MANY:{let r=y===eS.HAS_ONE?e=>({data:e?.data.shift()||null,errors:e.errors,extensions:e.extensions}):e=>e,c=a.primaryKeyInfo.primaryKeyFieldName,u=a.primaryKeyInfo.sortKeyFieldNames,f=d.fields[m[0]];if(f.type.model){let a=[];f.association&&"targetNames"in f.association&&(a=f.association?.targetNames);let d=a.map((e,n)=>0===n?{[e]:{eq:t[c]}}:{[e]:{eq:t[u[n-1]]}});if(e.models[p]?.list===void 0)break;s?n[l]=(n,s)=>t[c]?eb(async t=>{let a=eE(e.models[p].list(n,{filter:{and:d},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||i,authToken:s?.authToken||o}),t);return r(await a)}):[]:n[l]=n=>t[c]?eb(async t=>{let s=eE(e.models[p].list({filter:{and:d},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||i,authToken:n?.authToken||o}),t);return r(await s)}):[];break}let h=m.map((e,n)=>0===n?{[e]:{eq:t[c]}}:{[e]:{eq:t[u[n-1]]}});if(e.models[p]?.list===void 0)break;s?n[l]=(n,s)=>t[c]?eb(async t=>{let a=eE(e.models[p].list(n,{filter:{and:h},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||i,authToken:s?.authToken||o}),t);return r(await a)}):[]:n[l]=n=>t[c]?eb(async t=>{let s=eE(e.models[p].list({filter:{and:h},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||i,authToken:n?.authToken||o}),t);return r(await s)}):[]}}}return{...t,...n}})}let ew={CREATE:{operationPrefix:"create",usePlural:!1},GET:{operationPrefix:"get",usePlural:!1},UPDATE:{operationPrefix:"update",usePlural:!1},DELETE:{operationPrefix:"delete",usePlural:!1},LIST:{operationPrefix:"list",usePlural:!0},INDEX_QUERY:{operationPrefix:"",usePlural:!1},ONCREATE:{operationPrefix:"onCreate",usePlural:!1},ONUPDATE:{operationPrefix:"onUpdate",usePlural:!1},ONDELETE:{operationPrefix:"onDelete",usePlural:!1},OBSERVEQUERY:{operationPrefix:"observeQuery",usePlural:!1}},e_=(e,t)=>{let{fields:n}=e;return Object.fromEntries(Object.values(n).map(({type:e,name:n})=>"string"==typeof e.enum?[n,eC]:"string"==typeof e.nonModel?[n,e_(t.nonModels[e.nonModel],t)]:"string"==typeof e?[n,eC]:void 0).filter(e=>void 0!==e))},eI=(e,t)=>{let{fields:n}=e,r=Object.values(n).map(({type:e,name:n})=>"string"==typeof e.enum||"string"==typeof e?[n,eC]:"string"==typeof e.nonModel?[n,e_(t.nonModels[e.nonModel],t)]:void 0).filter(e=>void 0!==e),i=em(e).map(e=>[e,eC]);return Object.fromEntries(r.concat(i))},eC="";function ek(e){let t=[];return Object.entries(e).forEach(([e,n])=>{n===eC?t.push(e):"object"==typeof n&&null!==n&&(n?.items?t.push(e,"{","items","{",ek(n.items),"}","}"):t.push(e,"{",ek(n),"}"))}),t.join(" ")}function eR(e,t,n){let r=e.models[t];return ek(function(e,t,n){let r=(t,n)=>{let[i,...o]=t.split("."),s=o[0],a=e.models[n]??e.nonModels[n],c=a?.fields,u=c?.[i]?.type?.model,l=e.models[u],p=c?.[i]?.type?.nonModel,d=e.nonModels[p],f=l?"model":d?"nonModel":"field";if("nonModel"===f){if(!s)throw Error(`${i} must declare a wildcard (*) or a field of custom type ${p}`);return"*"===s?{[i]:e_(d,e)}:{[i]:r(o.join("."),p)}}if("model"===f){let t={};if(!s)throw Error(`${i} must declare a wildcard (*) or a field of model ${u}`);return t="*"===s?{[i]:eI(e.models[u],e)}:{[i]:r(o.join("."),u)},c[i]?.isArray&&(t={[i]:{items:t[i]}}),t}{let t=c?.[i],r=e.nonModels[n],o=r?.fields?.[i];if(r){if(!o)throw Error(`${i} is not a field of custom type ${n}`)}else{let e=em(a).includes(i);if(!t&&!e)throw Error(`${i} is not a field of model ${n}`)}return{[i]:eC}}};return n.reduce((e,n)=>(function e(t,n){let r=e=>e&&"object"==typeof e;for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(n,i)&&r(n[i])?e(t[i],n[i]):n[i]=t[i]);return n})(r(n,t),e),{})}(e,t,n??function(e){let{fields:t}=e,n=Object.values(t).map(({type:e,name:t})=>{if("string"==typeof e)return t;if("object"==typeof e){if("string"==typeof e?.enum)return t;if("string"==typeof e?.nonModel)return`${t}.*`}}).filter(Boolean),r=em(e);return Array.from(new Set(n.concat(r)))}(r)))}function eD(e,t,n,r,i){let o,s,a,c,u;let{name:l,pluralName:p,fields:d,primaryKeyInfo:{isCustomPrimaryKey:f,primaryKeyFieldName:h,sortKeyFieldNames:y},attributes:m}=t,g=l.charAt(0).toUpperCase()+l.slice(1),b=p.charAt(0).toUpperCase()+p.slice(1),{operationPrefix:v,usePlural:E}=ew[n],{selectionSet:S}=r||{};if(v)o=`${v}${E?b:g}`;else if(i){let{queryField:e,pk:t,sk:n=[]}=i;o=e;let r={};if(1===n.length){let[e]=n,t=eT["string"==typeof d[e].type?d[e].type:"String"];r={[e]:`Model${t}KeyConditionInput`}}else if(n.length>1){let t=eN(n),i=m?.find(t=>t?.properties?.queryField===e)?.properties?.name;r={[t]:`Model${eg(l)}${eg(i)}CompositeKeyConditionInput`}}s={[t]:`${Object.prototype.hasOwnProperty.call(d[t].type,"enum")?d[t].type.enum:d[t].type}!`,...r}}else throw Error("Error generating GraphQL Document - invalid operation name");let T=eR(e,l,S),N={[h]:`${d[h].type}!`},A={},O=e=>{if(0===y.length)return{};if("get"===e)return y.reduce((t,n)=>{let r=d[n].type;return"get"===e&&(t[n]=`${r}!`),t},{});if(1!==y.length)return{[eN(y)]:`Model${eg(l)}PrimaryCompositeKeyConditionInput`};{let[e]=y,t=eT["string"==typeof d[e].type?d[e].type:"String"];return{[e]:`Model${t}KeyConditionInput`}}};switch(f&&(Object.assign(N,O("get")),Object.assign(A,{[h]:`${d[h].type}`,sortDirection:"ModelSortDirection"},O("list"))),n){case"CREATE":case"UPDATE":case"DELETE":u??(u={input:`${v.charAt(0).toLocaleUpperCase()+v.slice(1)}${g}Input!`}),a??(a="mutation");case"GET":u??(u=N),c??(c=T);case"LIST":u??(u={...A,filter:`Model${g}FilterInput`,limit:"Int",nextToken:"String"}),a??(a="query"),c??(c=`items { ${T} } nextToken __typename`);case"INDEX_QUERY":u??(u={...s,filter:`Model${g}FilterInput`,sortDirection:"ModelSortDirection",limit:"Int",nextToken:"String"}),a??(a="query"),c??(c=`items { ${T} } nextToken __typename`);case"ONCREATE":case"ONUPDATE":case"ONDELETE":u??(u={filter:`ModelSubscription${g}FilterInput`}),a??(a="subscription"),c??(c=T);break;default:throw Error("Internal error: Attempted to generate graphql document for observeQuery. Please report this error.")}return`${a}${u?`(${Object.entries(u).map(([e,t])=>`$${e}: ${t}`)})`:""} { ${o}${u?`(${Object.keys(u).map(e=>`${e}: $${e}`)})`:""} { ${c} } }`}function ex(e,t,n,r,i){let{fields:o,primaryKeyInfo:{isCustomPrimaryKey:s,primaryKeyFieldName:a,sortKeyFieldNames:c}}=e,u=c?.length&&eN(c),l={};switch(t){case"CREATE":l={input:n?eP(n,e,r):{}};break;case"UPDATE":l={input:n?Object.fromEntries(Object.entries(eP(n,e,r)).filter(([t])=>o[t]?!o[t].isReadOnly:!em(e).includes(t))):{}};break;case"GET":case"DELETE":n&&(l=s?[a,...c].reduce((e,t)=>(e[t]=n[t],e),{}):{[a]:n[a]}),"DELETE"===t&&(l={input:l});break;case"LIST":n?.filter&&(l.filter=n.filter),n?.sortDirection&&(l.sortDirection=n.sortDirection),n&&n[a]&&(l[a]=n[a]),u&&n&&n[u]&&(l[u]=n[u]),n?.nextToken&&(l.nextToken=n.nextToken),n?.limit&&(l.limit=n.limit);break;case"INDEX_QUERY":{let{pk:e,sk:t=[]}=i,r=t?.length&&eN(t);l[e]=n[e],r&&n&&n[r]&&(l[r]=n[r]),n?.filter&&(l.filter=n.filter),n?.sortDirection&&(l.sortDirection=n.sortDirection),n?.nextToken&&(l.nextToken=n.nextToken),n?.limit&&(l.limit=n.limit);break}case"ONCREATE":case"ONUPDATE":case"ONDELETE":n?.filter&&(l={filter:n.filter});break;case"OBSERVEQUERY":throw Error("Internal error: Attempted to build variables for observeQuery. Please report this error.");default:throw Error(`Unhandled operation case: ${t}`)}return l}function eP(e,t,n){let{fields:r}=t,i={};return Object.entries(e).forEach(([e,t])=>{let o=r[e]?.type,s=o?.model;if(s){let o=r[e]?.association,a=n.models[s].primaryKeyInfo;o?.connectionType===eS.HAS_ONE&&o.targetNames.forEach((e,n)=>{let r=o.associatedWith[n];i[e]=t[r]}),o?.connectionType===eS.BELONGS_TO&&o.targetNames.forEach((e,n)=>{if(0===n){let n=a.primaryKeyFieldName;i[e]=t[n]}else{let r=a.sortKeyFieldNames[n-1];i[e]=t[r]}})}else i[e]=t}),i}function eL(e,t,n={}){let r=t(e);return{authMode:n.authMode||r.authMode,authToken:n.authToken||r.authToken}}function eM(e,t,n){let r=t(e).headers||{};return n&&(r=n),r}function eU(e){if(e?.errors)return{...e,data:[]};throw e}function ej(e){if(e.errors)return{...e,data:null};throw e}let eF=Symbol("INTERNAL_USER_AGENT_OVERRIDE");!function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnStreamEvent="7",e.Generation="8",e.UpdateConversation="9"}(h||(h={}));let e$=e=>({category:"ai",action:e});function eB(e){return e?{[eF]:e}:void 0}let eG=e=>"symbol"==typeof e?.token?.value;function eV(e,t,n,r,i,o,s){let a=void 0!==r.arguments;return(...c)=>{var u,l;let p,d;let f=c[c.length-1];if(i){if(eG(c[0]))p=c[0];else throw Error(`Invalid first argument passed to ${r.name}. Expected contextSpec`)}return(a&&(d=i?c[1]:c[0]),"subscription"===n)?function(e,t,n,r,i,o,s){let{name:a}=n,c=eL(e,r,o),u=eM(e,r,o?.headers),l=eq(n),p=eW(n),d=ez(t,n),f=eK(n.type,"model")?n.type.model:void 0,h=`
    ${"subscription".toLocaleLowerCase()}${l} {
      ${a}${p} ${d}
    }
  `,y=eY(n,i),m=eB(s);return e.graphql({...c,query:h,variables:y,...m},u).pipe(ey(n=>{let[r]=Object.keys(n.data),i=n.data[r],[o]=f?eO(e,f,[i],t,c.authMode,c.authToken):[i];return o}))}(e,t,r,o,d,f,s):(u=d,l=p,eb(async i=>{let{name:a}=r,c=eL(e,o,f),p=eM(e,o,f?.headers),d=eq(r),h=eW(r),y=ez(t,r),m=eK(r.type,"model")?r.type.model:void 0,g=`
    ${n.toLocaleLowerCase()}${d} {
      ${a}${h} ${y}
    }
  `,b=eY(r,u),v=eB(s);try{let n=l?e.graphql(l,{...c,query:g,variables:b},p):e.graphql({...c,query:g,variables:b,...v},p),r=eE(n,i),{data:o,extensions:s}=await r;if(!o)return{data:null,extensions:s};{let[n]=Object.keys(o),r=Array.isArray(o[n]),i=r?o[n].filter(e=>e):o[n],a=m?eO(e,m,r?i:[i],t,c.authMode,c.authToken,!!l):i;return{data:!r&&Array.isArray(a)?a.shift():a,extensions:s}}}catch(i){let{data:n,errors:r}=i;if(!n||0===Object.keys(n).length||!r)return ej(i);{let[o]=Object.keys(n),s=Array.isArray(n[o]),a=s?n[o].filter(e=>e):n[o];if(!a)return ej(i);{let n=m?eO(e,m,s?a:[a],t,c.authMode,c.authToken,!!l):a;return{data:!s&&Array.isArray(n)?n.shift():n,errors:r}}}}}))}}function eK(e,t){return"string"==typeof e[t]}function eq(e){if(void 0===e.arguments)return"";let t=Object.entries(e.arguments).map(([e,t])=>{let n=function({type:e,isRequired:t}){let n=t?"!":"";return e instanceof Object&&"enum"in e?`${e.enum}${n}`:e instanceof Object&&"input"in e?`${e.input}${n}`:`${e}${n}`}(t),r=t.isArray?`[${n}]${t.isArrayNullable?"":"!"}`:n;return`$${e}: ${r}`}).join(", ");return t.length>0?`(${t})`:""}function eW(e){if(void 0===e.arguments)return"";let t=Object.keys(e.arguments).map(e=>`${e}: $${e}`).join(", ");return t.length>0?`(${t})`:""}function ez(e,t){if(eK(t,"type")||eK(t.type,"enum"))return"";if(eK(t.type,"nonModel")){let n=e.nonModels[t.type.nonModel];return`{${ek(e_(n,e))}}`}return eK(t.type,"model")?`{${eR(e,t.type.model)}}`:""}function eY(e,t={}){let n={};if(void 0===e.arguments)return n;for(let r of Object.values(e.arguments))if(void 0!==t[r.name])n[r.name]=t[r.name];else if(r.isRequired)throw Error(`${e.name} requires arguments '${r.name}'`);return n}let eQ={queries:"query",mutations:"mutation",subscriptions:"subscription"};function eJ(e,t,n,r){if(!t)return{};let i=t.modelIntrospection;if(!i)return{};let o=i[n];if(!o)return{};let s={},a=null===r(e).amplify;for(let t of Object.values(o))s[t.name]=eV(e,i,eQ[n],t,a,r);return s}function eH(e,t,n,r,i,o=!1,s){return o?(o,a,c)=>eX(e,t,n,a,c,r,i,o,s):(o,a)=>eX(e,t,n,o,a,r,i,void 0,s)}function eX(e,t,n,r,i,o,s,a,c){return eb(async u=>{let{name:l}=n,p=eD(t,n,o,i),d=ex(n,o,r,t),f=eL(e,s,i),h=eM(e,s,i?.headers),y=eB(c);try{let n=a?e.graphql(a,{...f,query:p,variables:d},h):e.graphql({...f,query:p,variables:d,...y},h),r=eE(n,u),{data:o,extensions:s}=await r;if(!o)return{data:null,extensions:s};{let[n]=Object.keys(o),r=eA(t,l,o[n]);if(null===r)return{data:null,extensions:s};if(i?.selectionSet)return{data:r,extensions:s};{let[n]=eO(e,l,[r],t,f.authMode,f.authToken,!!a);return{data:n,extensions:s}}}}catch(o){let{data:n,errors:r}=o;if(!n||0===Object.keys(n).length||!r)return ej(o);{let[s]=Object.keys(n),c=eA(t,l,n[s]);if(!c)return ej(o);if(i?.selectionSet)return{data:c,errors:r};{let[n]=eO(e,l,[c],t,f.authMode,f.authToken,!!a);return{data:n,errors:r}}}}})}function eZ(e,t,n,r,i=!1,o){return i?(i,s)=>e0(e,t,n,r,s,i,o):i=>e0(e,t,n,r,i,void 0,o)}function e0(e,t,n,r,i,o,s){return eb(async a=>{let{name:c}=n,u=eD(t,n,"LIST",i),l=ex(n,"LIST",i,t),p=eL(e,r,i),d=eM(e,r,i?.headers),f=eB(s);try{let n=o?e.graphql(o,{...p,query:u,variables:l},d):e.graphql({...p,query:u,variables:l,...f},d),r=eE(n,a),{data:s,extensions:h}=await r;if(void 0!==s){let[n]=Object.keys(s);if(s[n].items){let r=s[n].items.map(e=>eA(t,c,e));if(i?.selectionSet)return{data:r,nextToken:s[n].nextToken,extensions:h};return{data:eO(e,c,r,t,p.authMode,p.authToken,!!o),nextToken:s[n].nextToken,extensions:h}}return{data:s[n],nextToken:s[n].nextToken,extensions:h}}}catch(s){let{data:n,errors:r}=s;if(null==n||0===Object.keys(n).length||!r)return eU(s);{let[a]=Object.keys(n);if(!n[a]?.items)return eU(s);{let s=n[a].items.map(e=>eA(t,c,e));if(s){if(i?.selectionSet)return{data:s,nextToken:n[a]?.nextToken,errors:r};return{data:eO(e,c,s,t,p.authMode,p.authToken,!!o),nextToken:n[a]?.nextToken,errors:r}}return{data:n[a],nextToken:n[a]?.nextToken,errors:r}}}}})}let e1=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e);var e2=n(8893);let e3=(e,t=0,n=e.byteLength-t)=>{if(!e1(e))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return e2.Buffer.from(e,t,n)},e4=(e,t)=>{if("string"!=typeof e)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?e2.Buffer.from(e,t):e2.Buffer.from(e)},e5=/^[A-Za-z0-9+/]*={0,2}$/,e6=e=>{if(3*e.length%4!=0)throw TypeError("Incorrect padding on base64 string.");if(!e5.exec(e))throw TypeError("Invalid base64 string.");let t=e4(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},e8=e=>{let t=e4(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},e7=e=>{let t;if("object"!=typeof(t="string"==typeof e?e8(e):e)||"number"!=typeof t.byteOffset||"number"!=typeof t.byteLength)throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return e3(t.buffer,t.byteOffset,t.byteLength).toString("base64")},e9=e=>e.map(e=>e.image?te(e):e.document?tt(e):e.toolUse?tr(e):e.toolResult?ti(e):to(e)),te=({image:e})=>({image:{...e,source:{...e.source,bytes:e6(e.source.bytes)}}}),tt=({document:e})=>({document:{...e,source:{...e.source,bytes:e6(e.source.bytes)}}}),tn=({json:e})=>({json:JSON.parse(e)}),tr=({toolUse:e})=>({toolUse:{...e,input:JSON.parse(e.input)}}),ti=({toolResult:e})=>({toolResult:{toolUseId:e.toolUseId,content:e.content.map(e=>e.image?te(e):e.json?tn(e):to(e))}}),to=e=>Object.fromEntries(Object.entries(e).filter(([e,t])=>null!==t)),ts=({content:e,createdAt:t,id:n,conversationId:r,role:i})=>({content:e9(e??[]),conversationId:r,createdAt:t,id:n,role:i}),ta=(e,t,n,r,i)=>async o=>{let s=eZ(e,t,r,i,!1,e$(h.ListMessages)),{data:a,nextToken:c,errors:u}=await s({...o,filter:{conversationId:{eq:n}}});return{data:a.map(e=>ts(e)),nextToken:c,errors:u}},tc=({id:e,conversationId:t,associatedUserMessageId:n,contentBlockIndex:r,contentBlockDoneAtIndex:i,contentBlockDeltaIndex:o,contentBlockText:s,contentBlockToolUse:a,stopReason:c,errors:u})=>u?{error:{id:e,conversationId:t,associatedUserMessageId:n,errors:u}}:{next:tl({id:e,conversationId:t,associatedUserMessageId:n,contentBlockIndex:r,contentBlockDoneAtIndex:i,contentBlockDeltaIndex:o,text:s,toolUse:tu(a),stopReason:c})},tu=e=>{if(e)return{...e,input:JSON.parse(e.input)}},tl=e=>Object.fromEntries(Object.entries(e).filter(([e,t])=>null!==t)),tp=(e,t,n,r,i)=>o=>{let{conversations:s}=t;return s?eV(e,t,"subscription",s[r].message.subscribe,!1,i,e$(h.OnStreamEvent))({conversationId:n}).subscribe(e=>{let{next:t,error:n}=tc(e);n&&o.error(n),t&&o.next(t)}):{}},td=e=>JSON.stringify(e),tf=e=>e.map(e=>e.image?ty(e):e.document?tm(e):e.toolResult?tb(e):e),th=({tools:e})=>({tools:Object.entries(e).map(([e,t])=>({toolSpec:{name:e,description:t.description,inputSchema:{json:JSON.stringify(t.inputSchema.json)}}}))}),ty=({image:e})=>({image:{...e,source:{...e.source,bytes:e7(e.source.bytes)}}}),tm=({document:e})=>({document:{...e,source:{...e.source,bytes:e7(e.source.bytes)}}}),tg=({json:e})=>({json:JSON.stringify(e)}),tb=({toolResult:e})=>({toolResult:{...e,content:e.content.map(e=>e.image?ty(e):e.json?tg(e):e)}}),tv=(e,t,n,r,i)=>async o=>{let{conversations:s}=t;if(!s)return{};let{content:a,aiContext:c,toolConfiguration:u}="string"==typeof o?{content:[{text:o}]}:o,l=eV(e,t,"mutation",s[r].message.send,!1,i,e$(h.SendMessage)),{data:p,errors:d}=await l({conversationId:n,content:tf(a),...c&&{aiContext:td(c)},...u&&{toolConfiguration:th(u)}});return{data:p?ts(p):p,errors:d}},tE=(e,t,n,r,i,o,s,a,c,u)=>{if(!n)throw Error(`An error occurred converting a ${o} conversation: Missing ID`);return{id:n,createdAt:r,updatedAt:i,metadata:c,name:u,onStreamEvent:tp(e,t,n,o,a),sendMessage:tv(e,t,n,o,a),listMessages:ta(e,t,n,s,a)}},tS=(e,t,n,r,i,o)=>async s=>{let{name:a,metadata:c}=s??{},u=JSON.stringify(c),l=eH(e,t,r,"CREATE",o,!1,e$(h.CreateConversation)),{data:p,errors:d}=await l({name:a,metadata:u});return{data:tE(e,t,p?.id,p?.createdAt,p?.updatedAt,n,i,o,p?.metadata,p?.name),errors:d}},tT=(e,t,n,r,i,o)=>async({id:s})=>{let a=eH(e,t,r,"GET",o,!1,e$(h.GetConversation)),{data:c,errors:u}=await a({id:s});return{data:c?tE(e,t,c.id,c.createdAt,c.updatedAt,n,i,o,c?.metadata,c?.name):c,errors:u}},tN=(e,t,n,r,i,o)=>async s=>{let a=eZ(e,t,r,o,!1,e$(h.ListConversations)),{data:c,nextToken:u,errors:l}=await a(s);return{data:c.map(r=>tE(e,t,r.id,r.createdAt,r.updatedAt,n,i,o,r?.metadata,r?.name)),nextToken:u,errors:l}},tA=(e,t,n,r,i,o)=>async({id:s})=>{let a=eH(e,t,r,"DELETE",o,!1,e$(h.DeleteConversation)),{data:c,errors:u}=await a({id:s});return{data:c?tE(e,t,c?.id,c?.createdAt,c?.updatedAt,n,i,o,c?.metadata,c?.name):c,errors:u}},tO=(e,t,n,r,i,o)=>async({id:s,metadata:a,name:c})=>{let u=JSON.stringify(a),l=eH(e,t,r,"UPDATE",o,!1,e$(h.UpdateConversation)),{data:p,errors:d}=await l({id:s,metadata:u,name:c});return{data:p?tE(e,t,p?.id,p?.createdAt,p?.updatedAt,n,i,o,p?.metadata,p?.name):p,errors:d}},tw=e=>{let t=e.modelIntrospection;if(!t)return{};let n={};for(let[e,r]of Object.entries(t.enums))n[r.name]={values:()=>r.values};return n};function t_(e,t,n,r,i,o,s){return eb(async a=>{let{name:c}=n,u=eD(t,n,"INDEX_QUERY",o,r),l=ex(n,"INDEX_QUERY",o,t,r),p=eL(e,i,o),d=n=>eO(e,c,n,t,p.authMode,p.authToken,!!s);try{let n=eM(e,i,o?.headers),r=[{...p,query:u,variables:l},n];void 0!==s&&r.unshift(s);let f=e.graphql(...r),h=eE(f,a),y=await h;if(void 0!==y.data)return function(e,t,n,r,i){let{data:o,extensions:s}=n,[a]=Object.keys(o);if(o[a].items){let n=o[a].items.map(n=>eA(e,t,n));return{data:r?n:i(n),nextToken:o[a].nextToken,extensions:s}}return{data:o[a],nextToken:o[a].nextToken,extensions:s}}(t,c,y,o?.selectionSet,d)}catch(r){let{data:e,errors:n}=r;if(null==e||0===Object.keys(e).length||!n)return eU(r);{let[n]=Object.keys(e);if(e[n]?.items){let r=e[n]?.items.map(e=>eA(t,c,e));if(r)return{data:o?.selectionSet?r:d(r),nextToken:e[n]?.nextToken}}return{data:e[n],nextToken:e[n]?.nextToken}}}})}var tI="function"==typeof Symbol&&Symbol.observable||"@@observable",tC=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof eo||r&&p(r.next)&&p(r.error)&&p(r.complete)&&J(r)?e:new eu(e,t,n);return function(e){if(X.useDeprecatedSynchronousErrorHandling){var t=!ei;if(t&&(ei={errorThrown:!1,error:null}),e(),t){var n=ei,r=n.errorThrown,i=n.error;if(ei=null,r)throw i}}else e()}(function(){var e=i.operator,t=i.source;o.add(e?e.call(o,t):t?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=tk(t))(function(t,r){var i=new eu({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[tI]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?function(e){return e}:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=tk(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function tk(e){var t;return null!==(t=null!=e?e:X.Promise)&&void 0!==t?t:Promise}let tR=e=>"key"===e.type&&e.properties?.name&&e.properties?.queryField&&e.properties?.fields.length>0,tD=e=>e.attributes?.filter(tR).map(e=>{let t=e.properties.queryField,[n,...r]=e.properties.fields;return{queryField:t,pk:n,sk:r}})||[],tx=(e,t)=>{let n=e.models[t].attributes?.find(e=>"model"===e.type),r={queries:["list","get","observeQuery"],mutations:["create","update","delete"],subscriptions:["onCreate","onUpdate","onDelete"]},i=[];if(!n)return ew;if(n.properties)for(let[e,t]of Object.entries(n.properties))e in r&&(null===t?i.push(...r[e]):t instanceof Object&&i.push(...Object.keys(t)));i.includes("list")&&i.push("observeQuery");let o=i.map(e=>e.toUpperCase());return Object.fromEntries(Object.entries(ew).filter(([e])=>!o.includes(e)))};function tP(e,t,n){return function(e){let t=e.cancel.bind(e);e.cancel=function(e,n){let r=new Set,i=e;for(;i&&ev.has(i);){if(r.has(i))throw Error("A cycle was detected in the modeled graphql cancellation chain. This is a bug. Please report it!");r.add(i),i=ev.get(i)}return t(i,n)}}(e),e.models=function(e,t,n){let r={},i=t.modelIntrospection;if(!i)return{};let o=["ONCREATE","ONUPDATE","ONDELETE"];for(let t of Object.values(i.models)){let{name:s}=t;for(let a of(r[s]={},Object.entries(tx(i,s)).forEach(([a,{operationPrefix:c}])=>{"LIST"===a?r[s][c]=eZ(e,i,t,n):o.includes(a)?r[s][c]=function(e,t,n,r,i){let{name:o}=n;return s=>{let a=eD(t,n,r,s),c=ex(n,r,s,t),u=eL(e,i,s),l=eM(e,i,s?.headers);return e.graphql({...u,query:a,variables:c},l).pipe(ey(n=>{let[r]=Object.keys(n.data),i=eA(t,o,n.data[r]);if(null===i)return null;if(s?.selectionSet)return i;{let[n]=eO(e,o,[i],t,u.authMode,u.authToken);return n}}))}}(e,i,t,a,n):"OBSERVEQUERY"===a?r[s][c]=function(e,t){let{name:n}=t;return r=>new tC(i=>{let o=[],s=[],a=(...e)=>s.push(...e),c=e[n].onCreate(r).subscribe({next(e){a({item:e,type:"create"})},error(e){i.error({type:"onCreate",error:e})}}),u=e[n].onUpdate(r).subscribe({next(e){a({item:e,type:"update"})},error(e){i.error({type:"onUpdate",error:e})}}),l=e[n].onDelete(r).subscribe({next(e){a({item:e,type:"delete"})},error(e){i.error({type:"onDelete",error:e})}});function p(e){for(let t of e){let e=function(e,t,n){let r=Object.fromEntries(n.map(t=>[t,e[t]]));for(let e=0;e<t.length;e++)if(Object.keys(r).every(n=>r[n]===t[e][n]))return e;return -1}(t.item,o,d);switch(t.type){case"create":e<0&&o.push(t.item);break;case"update":e>=0&&(o[e]=t.item);break;case"delete":e>=0&&o.splice(e,1);break;default:console.error("Unrecognized message in observeQuery.",t)}}i.next({items:o,isSynced:!0})}let d=function(e){let{primaryKeyFieldName:t,sortKeyFieldNames:n}=e.primaryKeyInfo;return[t,...n]}(t);return(async()=>{let t=!0,c=null;for(;!i.closed&&(t||c);){t=!1;let{data:a,errors:u,nextToken:l}=await e[n].list({...r,nextToken:c});c=l,o.push(...a);let p=0===s.length&&null==c;if(i.next({items:o,isSynced:p}),Array.isArray(u))for(let e of u)i.error(e)}s.length>0&&p(s),a=(...e)=>(p(e),o.length)})(),()=>{c.unsubscribe(),u.unsubscribe(),l.unsubscribe()}})}(r,t):r[s][c]=eH(e,i,t,a,n)}),tD(t)))r[s][a.queryField]=function(e,t,n,r,i,o=!1){return o?(o,s,a)=>t_(e,t,n,r,i,{...s,...a},o):(o,s)=>t_(e,t,n,r,i,{...o,...s})}(e,i,t,a,n)}return r}(e,t,n),e.enums=tw(t),e.queries=eJ(e,t,"queries",n),e.mutations=eJ(e,t,"mutations",n),e.subscriptions=eJ(e,t,"subscriptions",n),e.conversations=function(e,t,n){let r=t?.modelIntrospection;if(!r?.conversations)return{};let i={};for(let{name:t,conversation:o,message:s,models:a,nonModels:c,enums:u}of Object.values(r.conversations)){let l=a[o.modelName],p=a[s.modelName];if(!l||!p)return{};let d={...r,models:{...r.models,...a},nonModels:{...r.nonModels,...c},enums:{...r.enums,...u}};i[t]={update:tO(e,d,t,l,p,n),create:tS(e,d,t,l,p,n),get:tT(e,d,t,l,p,n),delete:tA(e,d,t,l,p,n),list:tN(e,d,t,l,p,n)}}return i}(e,t,n),e.generations=function(e,t,n){let r=t?.modelIntrospection;if(!r?.generations)return{};let i={};for(let t of Object.values(r.generations))i[t.name]=eV(e,r,"query",t,!1,n,e$(h.Generation));return i}(e,t,n),e}!function(e){e.NO_API_KEY="No api-key configured",e.NO_CURRENT_USER="No current user",e.NO_CREDENTIALS="No credentials",e.NO_FEDERATED_JWT="No federated jwt",e.NO_AUTH_TOKEN="No auth token specified"}(y||(y={}));let tL=Symbol("amplify"),tM=Symbol("authMode"),tU=Symbol("authToken"),tj=Symbol("apiKey"),tF=Symbol("headers"),t$=Symbol("endpoint");function tB(e){return{amplify:e[tL],apiKey:e[tj],authMode:e[tM],authToken:e[tU],endpoint:e[t$],headers:e[tF]}}function tG(e){return(tG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(m||(m={})),function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"}(g||(g={})),function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"}(b||(b={})),function(e){e.Record="1",e.IdentifyUser="2"}(v||(v={})),function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"}(E||(E={})),function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40"}(S||(S={})),function(e){e.Subscribe="1",e.GraphQl="2"}(T||(T={})),function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"}(N||(N={})),function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"}(A||(A={})),(O||(O={})).None="0",function(e){e.Convert="1",e.Identify="2",e.Interpret="3"}(w||(w={})),(_||(_={})).Subscribe="1",function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"}(I||(I={})),function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9"}(C||(C={})),"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var tV="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function tK(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function tq(e,t){var n=e.locationOffset.column-1,r=tz(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=1===t.line?n:0,c=t.column+a,u="".concat(e.name,":").concat(s,":").concat(c,"\n"),l=r.split(/\r\n|[\n\r]/g),p=l[i];if(p.length>120){for(var d=Math.floor(c/80),f=c%80,h=[],y=0;y<p.length;y+=80)h.push(p.slice(y,y+80));return u+tW([["".concat(s),h[0]]].concat(h.slice(1,d+1).map(function(e){return["",e]}),[[" ",tz(f-1)+"^"],["",h[d+1]]]))}return u+tW([["".concat(s-1),l[i-1]],["".concat(s),p],["",tz(c-1)+"^"],["".concat(s+1),l[i+1]]])}function tW(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=Math.max.apply(Math,t.map(function(e){return e[0].length}));return t.map(function(e){var t=e[0],r=e[1];return tz(n-t.length)+t+(r?" | "+r:" |")}).join("\n")}function tz(e){return Array(e+1).join(" ")}function tY(e){return(tY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tJ(e,t){return t&&("object"===tY(t)||"function"==typeof t)?t:tH(e)}function tH(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tX(e){var t="function"==typeof Map?new Map:void 0;return(tX=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return tZ(e,arguments,t2(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t1(n,e)})(e)}function tZ(e,t,n){return(tZ=t0()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&t1(i,n.prototype),i}).apply(null,arguments)}function t0(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function t1(e,t){return(t1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function t2(e){return(t2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var t3=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&t1(e,t)}(i,e);var t,n,r=(t=t0(),function(){var e,n=t2(i);return e=t?Reflect.construct(n,arguments,t2(this).constructor):n.apply(this,arguments),tJ(this,e)});function i(e,t,n,o,s,a,c){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,i),(m=r.call(this,e)).name="GraphQLError",m.originalError=null!=a?a:void 0,m.nodes=t4(Array.isArray(t)?t:t?[t]:void 0);for(var u,l=[],p=0,d=null!==(g=m.nodes)&&void 0!==g?g:[];p<d.length;p++){var f,h,y,m,g,b=d[p].loc;null!=b&&l.push(b)}l=t4(l),m.source=null!=n?n:null===(f=l)||void 0===f?void 0:f[0].source,m.positions=null!=o?o:null===(h=l)||void 0===h?void 0:h.map(function(e){return e.start}),m.locations=o&&n?o.map(function(e){return tK(n,e)}):null===(y=l)||void 0===y?void 0:y.map(function(e){return tK(e.source,e.start)}),m.path=null!=s?s:void 0;var v=null==a?void 0:a.extensions;return null==c&&"object"==tG(u=v)&&null!==u?m.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tQ(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},v):m.extensions=null!=c?c:{},(Object.defineProperties(tH(m),{message:{enumerable:!0},locations:{enumerable:null!=m.locations},path:{enumerable:null!=m.path},extensions:{enumerable:null!=m.extensions&&Object.keys(m.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=a&&a.stack)?(Object.defineProperty(tH(m),"stack",{value:a.stack,writable:!0,configurable:!0}),tJ(m)):(Error.captureStackTrace?Error.captureStackTrace(tH(m),i):Object.defineProperty(tH(m),"stack",{value:Error().stack,writable:!0,configurable:!0}),m)}return n=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i,o=r[n];o.loc&&(t+="\n\n"+tq((i=o.loc).source,tK(i.source,i.start)))}else if(e.source&&e.locations)for(var s=0,a=e.locations;s<a.length;s++){var c=a[s];t+="\n\n"+tq(e.source,c)}return t}(this)}},{key:tV,get:function(){return"Object"}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(i.prototype,n),i}(tX(Error));function t4(e){return void 0===e||0===e.length?void 0:e}function t5(e,t,n){return new t3("Syntax Error: ".concat(n),void 0,e,[t])}var t6=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),t8="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function t7(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){throw Error("Unexpected invariant triggered.")}(0),e.prototype.inspect=t,t8&&(e.prototype[t8]=t)}var t9=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();t7(t9);var ne=function(){function e(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function nt(e){return null!=e&&"string"==typeof e.kind}t7(ne);var nn=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t){switch(nr(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":if(null===e)return"null";return function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n,r,i=[].concat(t,[e]),o="function"==typeof(n=e[String(t8)])?n:"function"==typeof e.inspect?e.inspect:void 0;if(void 0!==o){var s=o.call(e);if(s!==e)return"string"==typeof s?s:ni(s,i)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,i=[],o=0;o<n;++o)i.push(ni(e[o],t));return 1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items")),"["+i.join(", ")+"]"}(e,i);return 0===(r=Object.keys(e)).length?"{}":i.length>2?"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]":"{ "+r.map(function(t){var n=ni(e[t],i);return t+": "+n}).join(", ")+" }"}(e,t);default:return String(e)}}function no(e,t){if(!e)throw Error(t)}var ns=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||no(0,"Body must be a string. Received: ".concat(ni(e,[]),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||no(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||no(0,"column in locationOffset is 1-indexed and must be positive.")}return function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,[{key:tV,get:function(){return"Source"}}]),e}(),na=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function nc(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"	"!==e[t])return!1;return!0}var nu=function(){function e(e){var t=new ne(nn.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e,t=this.token;if(t.kind!==nn.EOF)do t=null!==(e=t.next)&&void 0!==e?e:t.next=function(e,t){for(var n=e.source,r=n.body,i=r.length,o=t.end;o<i;){var s=r.charCodeAt(o),a=e.line,c=1+o-e.lineStart;switch(s){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++e.line,e.lineStart=o;continue;case 13:10===r.charCodeAt(o+1)?o+=2:++o,++e.line,e.lineStart=o;continue;case 33:return new ne(nn.BANG,o,o+1,a,c,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;do o=s.charCodeAt(++a);while(!isNaN(o)&&(o>31||9===o));return new ne(nn.COMMENT,t,a,n,r,i,s.slice(t+1,a))}(n,o,a,c,t);case 36:return new ne(nn.DOLLAR,o,o+1,a,c,t);case 38:return new ne(nn.AMP,o,o+1,a,c,t);case 40:return new ne(nn.PAREN_L,o,o+1,a,c,t);case 41:return new ne(nn.PAREN_R,o,o+1,a,c,t);case 46:if(46===r.charCodeAt(o+1)&&46===r.charCodeAt(o+2))return new ne(nn.SPREAD,o,o+3,a,c,t);break;case 58:return new ne(nn.COLON,o,o+1,a,c,t);case 61:return new ne(nn.EQUALS,o,o+1,a,c,t);case 64:return new ne(nn.AT,o,o+1,a,c,t);case 91:return new ne(nn.BRACKET_L,o,o+1,a,c,t);case 93:return new ne(nn.BRACKET_R,o,o+1,a,c,t);case 123:return new ne(nn.BRACE_L,o,o+1,a,c,t);case 124:return new ne(nn.PIPE,o,o+1,a,c,t);case 125:return new ne(nn.BRACE_R,o,o+1,a,c,t);case 34:if(34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2))return function(e,t,n,r,i,o){for(var s=e.body,a=t+3,c=a,u=0,l="";a<s.length&&!isNaN(u=s.charCodeAt(a));){if(34===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2))return l+=s.slice(c,a),new ne(nn.BLOCK_STRING,t,a+3,n,r,i,function(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,i=0,o=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:10===e.charCodeAt(s+1)&&++s;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(null===o||i<o)&&(o=i),r=!1}return null!==(t=o)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&nc(t[i]);)++i;for(var o=t.length;o>i&&nc(t[o-1]);)--o;return t.slice(i,o).join("\n")}(l));if(u<32&&9!==u&&10!==u&&13!==u)throw t5(e,a,"Invalid character within String: ".concat(nl(u),"."));10===u?(++a,++o.line,o.lineStart=a):13===u?(10===s.charCodeAt(a+1)?a+=2:++a,++o.line,o.lineStart=a):92===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2)&&34===s.charCodeAt(a+3)?(l+=s.slice(c,a)+'"""',a+=4,c=a):++a}throw t5(e,a,"Unterminated string.")}(n,o,a,c,t,e);return function(e,t,n,r,i){for(var o=e.body,s=t+1,a=s,c=0,u="";s<o.length&&!isNaN(c=o.charCodeAt(s))&&10!==c&&13!==c;){if(34===c)return u+=o.slice(a,s),new ne(nn.STRING,t,s+1,n,r,i,u);if(c<32&&9!==c)throw t5(e,s,"Invalid character within String: ".concat(nl(c),"."));if(++s,92===c){switch(u+=o.slice(a,s-1),c=o.charCodeAt(s)){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+="\n";break;case 114:u+="\r";break;case 116:u+="	";break;case 117:var l,p,d,f,h=(l=o.charCodeAt(s+1),p=o.charCodeAt(s+2),d=o.charCodeAt(s+3),f=o.charCodeAt(s+4),nd(l)<<12|nd(p)<<8|nd(d)<<4|nd(f));if(h<0){var y=o.slice(s+1,s+5);throw t5(e,s,"Invalid character escape sequence: \\u".concat(y,"."))}u+=String.fromCharCode(h),s+=4;break;default:throw t5(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}a=++s}}throw t5(e,s,"Unterminated string.")}(n,o,a,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s,a=e.body,c=n,u=t,l=!1;if(45===c&&(c=a.charCodeAt(++u)),48===c){if((c=a.charCodeAt(++u))>=48&&c<=57)throw t5(e,u,"Invalid number, unexpected digit after 0: ".concat(nl(c),"."))}else u=np(e,u,c),c=a.charCodeAt(u);if(46===c&&(l=!0,c=a.charCodeAt(++u),u=np(e,u,c),c=a.charCodeAt(u)),(69===c||101===c)&&(l=!0,(43===(c=a.charCodeAt(++u))||45===c)&&(c=a.charCodeAt(++u)),u=np(e,u,c),c=a.charCodeAt(u)),46===c||95===(s=c)||s>=65&&s<=90||s>=97&&s<=122)throw t5(e,u,"Invalid number, expected digit but got: ".concat(nl(c),"."));return new ne(l?nn.FLOAT:nn.INT,t,u,r,i,o,a.slice(t,u))}(n,o,s,a,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){for(var o=e.body,s=o.length,a=t+1,c=0;a!==s&&!isNaN(c=o.charCodeAt(a))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new ne(nn.NAME,t,a,n,r,i,o.slice(t,a))}(n,o,a,c,t)}throw t5(n,o,s<32&&9!==s&&10!==s&&13!==s?"Cannot contain the invalid character ".concat(nl(s),"."):39===s?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(nl(s),"."))}var u=e.line,l=1+o-e.lineStart;return new ne(nn.EOF,i,i,u,l,t)}(this,t);while(t.kind===nn.COMMENT);return t},e}();function nl(e){return isNaN(e)?nn.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function np(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do o=r.charCodeAt(++i);while(o>=48&&o<=57);return i}throw t5(e,i,"Invalid number, expected digit but got: ".concat(nl(o),"."))}function nd(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function nf(e,t){return new nh(e,t).parseDocument()}var nh=function(){function e(e,t){var n=e instanceof ns?e:new ns(e);this._lexer=new nu(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(nn.NAME);return{kind:t6.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:t6.DOCUMENT,definitions:this.many(nn.SOF,this.parseDefinition,nn.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(nn.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else if(this.peek(nn.BRACE_L))return this.parseOperationDefinition();else if(this.peekDescription())return this.parseTypeSystemDefinition();throw this.unexpected()},t.parseOperationDefinition=function(){var e,t=this._lexer.token;if(this.peek(nn.BRACE_L))return{kind:t6.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var n=this.parseOperationType();return this.peek(nn.NAME)&&(e=this.parseName()),{kind:t6.OPERATION_DEFINITION,operation:n,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseOperationType=function(){var e=this.expectToken(nn.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(nn.PAREN_L,this.parseVariableDefinition,nn.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:t6.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(nn.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(nn.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(nn.DOLLAR),{kind:t6.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:t6.SELECTION_SET,selections:this.many(nn.BRACE_L,this.parseSelection,nn.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(nn.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(nn.COLON)?(e=r,t=this.parseName()):t=r,{kind:t6.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(nn.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(nn.PAREN_L,t,nn.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(nn.COLON),{kind:t6.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:t6.ARGUMENT,name:this.parseName(),value:(this.expectToken(nn.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(nn.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(nn.NAME)?{kind:t6.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:t6.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return(this.expectKeyword("fragment"),(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)===!0)?{kind:t6.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:t6.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case nn.BRACKET_L:return this.parseList(e);case nn.BRACE_L:return this.parseObject(e);case nn.INT:return this._lexer.advance(),{kind:t6.INT,value:t.value,loc:this.loc(t)};case nn.FLOAT:return this._lexer.advance(),{kind:t6.FLOAT,value:t.value,loc:this.loc(t)};case nn.STRING:case nn.BLOCK_STRING:return this.parseStringLiteral();case nn.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:t6.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:t6.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:t6.NULL,loc:this.loc(t)};default:return{kind:t6.ENUM,value:t.value,loc:this.loc(t)}}case nn.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:t6.STRING,value:e.value,block:e.kind===nn.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:t6.LIST,values:this.any(nn.BRACKET_L,function(){return t.parseValueLiteral(e)},nn.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:t6.OBJECT,fields:this.any(nn.BRACE_L,function(){return t.parseObjectField(e)},nn.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(nn.COLON),{kind:t6.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(nn.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(nn.AT),{kind:t6.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return(this.expectOptionalToken(nn.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(nn.BRACKET_R),e={kind:t6.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(nn.BANG))?{kind:t6.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:t6.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===nn.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(nn.STRING)||this.peek(nn.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(nn.BRACE_L,this.parseOperationTypeDefinition,nn.BRACE_R);return{kind:t6.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(nn.COLON);var n=this.parseNamedType();return{kind:t6.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:t6.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:t6.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if((null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)===!0){var t=[];this.expectOptionalToken(nn.AMP);do t.push(this.parseNamedType());while(this.expectOptionalToken(nn.AMP)||this.peek(nn.NAME));return t}return this.delimitedMany(nn.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)===!0&&this.peek(nn.BRACE_L)&&this._lexer.lookahead().kind===nn.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(nn.BRACE_L,this.parseFieldDefinition,nn.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(nn.COLON);var i=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:t6.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(nn.PAREN_L,this.parseInputValueDef,nn.PAREN_R)},t.parseInputValueDef=function(){var e,t=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(nn.COLON);var i=this.parseTypeReference();this.expectOptionalToken(nn.EQUALS)&&(e=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:t6.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:e,directives:o,loc:this.loc(t)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:t6.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:t6.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(nn.EQUALS)?this.delimitedMany(nn.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:t6.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(nn.BRACE_L,this.parseEnumValueDefinition,nn.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:t6.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:t6.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(nn.BRACE_L,this.parseInputValueDef,nn.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===nn.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(nn.BRACE_L,this.parseOperationTypeDefinition,nn.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:t6.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:t6.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:t6.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:t6.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:t6.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:t6.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:t6.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(nn.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:t6.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(nn.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==na[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if((null===(t=this._options)||void 0===t?void 0:t.noLocation)!==!0)return new t9(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw t5(this._lexer.source,t.start,"Expected ".concat(nm(e),", found ").concat(ny(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind===nn.NAME&&t.value===e)this._lexer.advance();else throw t5(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(ny(t),"."))},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===nn.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return t5(this._lexer.source,t.start,"Unexpected ".concat(ny(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n},e}();function ny(e){var t=e.value;return nm(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function nm(e){return e===nn.BANG||e===nn.DOLLAR||e===nn.AMP||e===nn.PAREN_L||e===nn.PAREN_R||e===nn.SPREAD||e===nn.COLON||e===nn.EQUALS||e===nn.AT||e===nn.BRACKET_L||e===nn.BRACKET_R||e===nn.BRACE_L||e===nn.PIPE||e===nn.BRACE_R?'"'.concat(e,'"'):e}var ng={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},nb=Object.freeze({});function nv(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ng,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],c=void 0,u=void 0,l=void 0,p=[],d=[],f=e;do{var h,y=++s===o.length,m=y&&0!==a.length;if(y){if(u=0===d.length?void 0:p[p.length-1],c=l,l=d.pop(),m){if(i)c=c.slice();else{for(var g={},b=0,v=Object.keys(c);b<v.length;b++){var E=v[b];g[E]=c[E]}c=g}for(var S=0,T=0;T<a.length;T++){var N=a[T][0],A=a[T][1];i&&(N-=S),i&&null===A?(c.splice(N,1),S++):c[N]=A}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(u=l?i?s:o[s]:void 0,null==(c=l?l[u]:f))continue;l&&p.push(u)}var O=void 0;if(!Array.isArray(c)){if(!nt(c))throw Error("Invalid AST Node: ".concat(ni(c,[]),"."));var w=function(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}(t,c.kind,y);if(w){if((O=w.call(t,c,u,l,p,d))===nb)break;if(!1===O){if(!y){p.pop();continue}}else if(void 0!==O&&(a.push([u,O]),!y)){if(nt(O))c=O;else{p.pop();continue}}}}void 0===O&&m&&a.push([u,c]),y?p.pop():(r={inArray:i,index:s,keys:o,edits:a,prev:r},o=(i=Array.isArray(c))?c:null!==(h=n[c.kind])&&void 0!==h?h:[],s=-1,a=[],l&&d.push(l),l=c)}while(void 0!==r);return 0!==a.length&&(f=a[a.length-1][1]),f}(e,{leave:nE})}var nE={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return nT(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=nA("(",nT(e.variableDefinitions,", "),")"),i=nT(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?nT([t,nT([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+nA(" = ",r)+nA(" ",nT(i," "))},SelectionSet:function(e){return nN(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet,s=nA("",t,": ")+n,a=s+nA("(",nT(r,", "),")");return a.length>80&&(a=s+nA("(\n",nO(nT(r,"\n")),"\n)")),nT([a,nT(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+nA(" ",nT(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return nT(["...",nA("on ",t),nT(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(nA("(",nT(r,", "),")")," ")+"on ".concat(n," ").concat(nA("",nT(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"	"===e[0],o='"'===e[e.length-1],s="\\"===e[e.length-1],a=!r||o||s||n,c="";return a&&!(r&&i)&&(c+="\n"+t),c+=t?e.replace(/\n/g,"\n"+t):e,a&&(c+="\n"),'"""'+c.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+nT(e.values,", ")+"]"},ObjectValue:function(e){return"{"+nT(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+nA("(",nT(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:nS(function(e){var t=e.directives,n=e.operationTypes;return nT(["schema",nT(t," "),nN(n)]," ")}),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:nS(function(e){return nT(["scalar",e.name,nT(e.directives," ")]," ")}),ObjectTypeDefinition:nS(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return nT(["type",t,nA("implements ",nT(n," & ")),nT(r," "),nN(i)]," ")}),FieldDefinition:nS(function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(n_(n)?nA("(\n",nO(nT(n,"\n")),"\n)"):nA("(",nT(n,", "),")"))+": "+r+nA(" ",nT(i," "))}),InputValueDefinition:nS(function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return nT([t+": "+n,nA("= ",r),nT(i," ")]," ")}),InterfaceTypeDefinition:nS(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return nT(["interface",t,nA("implements ",nT(n," & ")),nT(r," "),nN(i)]," ")}),UnionTypeDefinition:nS(function(e){var t=e.name,n=e.directives,r=e.types;return nT(["union",t,nT(n," "),r&&0!==r.length?"= "+nT(r," | "):""]," ")}),EnumTypeDefinition:nS(function(e){var t=e.name,n=e.directives,r=e.values;return nT(["enum",t,nT(n," "),nN(r)]," ")}),EnumValueDefinition:nS(function(e){return nT([e.name,nT(e.directives," ")]," ")}),InputObjectTypeDefinition:nS(function(e){var t=e.name,n=e.directives,r=e.fields;return nT(["input",t,nT(n," "),nN(r)]," ")}),DirectiveDefinition:nS(function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(n_(n)?nA("(\n",nO(nT(n,"\n")),"\n)"):nA("(",nT(n,", "),")"))+(r?" repeatable":"")+" on "+nT(i," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return nT(["extend schema",nT(t," "),nN(n)]," ")},ScalarTypeExtension:function(e){return nT(["extend scalar",e.name,nT(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return nT(["extend type",t,nA("implements ",nT(n," & ")),nT(r," "),nN(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return nT(["extend interface",t,nA("implements ",nT(n," & ")),nT(r," "),nN(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return nT(["extend union",t,nT(n," "),r&&0!==r.length?"= "+nT(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return nT(["extend enum",t,nT(n," "),nN(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return nT(["extend input",t,nT(n," "),nN(r)]," ")}};function nS(e){return function(t){return nT([t.description,e(t)],"\n")}}function nT(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter(function(e){return e}).join(n))&&void 0!==t?t:""}function nN(e){return nA("{\n",nO(nT(e,"\n")),"\n}")}function nA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function nO(e){return nA("  ",e.replace(/\n/g,"\n  "))}function nw(e){return -1!==e.indexOf("\n")}function n_(e){return null!=e&&e.some(nw)}var nI="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function nC(e){if(e instanceof tC)return e;if(null!=e){if(p(e[tI]))return new tC(function(t){var n=e[tI]();if(p(n.subscribe))return n.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(e&&"number"==typeof e.length&&"function"!=typeof e)return new tC(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()});if(p(null==e?void 0:e.then))return new tC(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,ee)});if(Symbol.asyncIterator&&p(null==e?void 0:e[Symbol.asyncIterator]))return nk(e);if(p(null==e?void 0:e[nI]))return new tC(function(t){var n,r;try{for(var i=V(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()});if(p(null==e?void 0:e.getReader))return nk(function(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||a(e,t)})},t&&(r[e]=t(r[e])))}function a(e,t){try{var n;(n=i[e](t)).value instanceof W?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function(){var t,n,r;return G(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,W(t.read())];case 3:if(r=(n=i.sent()).value,!n.done)return[3,5];return[4,W(void 0)];case 4:return[2,i.sent()];case 5:return[4,W(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}(e))}throw TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function nk(e){return new tC(function(t){(function(e,t){var n,r,i,o;return B(this,void 0,void 0,function(){var s;return G(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=V(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,i,(t=e[n](t)).done,t.value)})}}}(e),a.label=1;case 1:return[4,n.next()];case 2:if((r=a.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i={error:a.sent()},[3,11];case 6:if(a.trys.push([6,,9,10]),!(r&&!r.done&&(o=n.return)))return[3,8];return[4,o.call(n)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}let nR=URL,nD=URLSearchParams,nx="6.16.2",nP=()=>"undefined"!=typeof global,nL=()=>"undefined"!=typeof window,nM=()=>"undefined"!=typeof document,nU=()=>"undefined"!=typeof process,nj=(e,t)=>!!Object.keys(e).find(e=>e.startsWith(t)),nF=[{platform:m.Expo,detectionMethod:function(){return nP()&&void 0!==global.expo}},{platform:m.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:m.NextJs,detectionMethod:function(){return nL()&&window.next&&"object"==typeof window.next}},{platform:m.Nuxt,detectionMethod:function(){return nL()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:m.Angular,detectionMethod:function(){let e=!!(nM()&&document.querySelector("[ng-version]")),t=!!(nL()&&void 0!==window.ng);return e||t}},{platform:m.React,detectionMethod:function(){let e=e=>e.startsWith("_react")||e.startsWith("__react");return nM()&&Array.from(document.querySelectorAll("[id]")).some(t=>Object.keys(t).find(e))}},{platform:m.VueJs,detectionMethod:function(){return nL()&&nj(window,"__VUE")}},{platform:m.Svelte,detectionMethod:function(){return nL()&&nj(window,"__SVELTE")}},{platform:m.WebUnknown,detectionMethod:function(){return nL()}},{platform:m.NextJsSSR,detectionMethod:function(){return nP()&&(nj(global,"__next")||nj(global,"__NEXT"))}},{platform:m.NuxtSSR,detectionMethod:function(){return nP()&&void 0!==global.__NUXT_PATHS__}},{platform:m.ReactSSR,detectionMethod:function(){return nU()&&void 0!==process.env&&!!Object.keys(process.env).find(e=>e.includes("react"))}},{platform:m.VueJsSSR,detectionMethod:function(){return nP()&&nj(global,"__VUE")}},{platform:m.AngularSSR,detectionMethod:function(){return nU()&&"object"==typeof process.env&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:m.SvelteSSR,detectionMethod:function(){return nU()&&void 0!==process.env&&!!Object.keys(process.env).find(e=>e.includes("svelte"))}}],n$=[],nB=!1,nG=()=>{if(!r){if(r=nF.find(e=>e.detectionMethod())?.platform||m.ServerSideUnknown,nB)for(;n$.length;)n$.pop()?.();else n$.forEach(e=>{e()});nK(m.ServerSideUnknown,10),nK(m.WebUnknown,10)}return r},nV=e=>{nB||n$.push(e)};function nK(e,t){r!==e||nB||setTimeout(()=>{r=void 0,nB=!0,setTimeout(nG,1e3)},t)}let nq={},nW=(e,t)=>nq[e]?.[t]?.additionalDetails,nz="aws-amplify",nY=e=>e.replace(/\+.*/,"");class nQ{constructor(){this.userAgent=`${nz}/${nY(nx)}`}get framework(){return nG()}get isReactNative(){return this.framework===m.ReactNative||this.framework===m.Expo}observeFrameworkChanges(e){nV(e)}}new nQ;let nJ=({category:e,action:t}={})=>{let n=[[nz,nY(nx)]];if(e&&n.push([e,t]),n.push(["framework",nG()]),e&&t){let r=nW(e,t);r&&r.forEach(e=>{n.push(e)})}return n},nH=e=>nJ(e).map(([e,t])=>e&&t?`${e}/${t}`:e).join(" ");class nX extends s{get response(){return this._response?nZ(this._response):void 0}constructor(e){super(e),this.constructor=nX,Object.setPrototypeOf(this,nX.prototype),e.response&&(this._response=e.response)}}let nZ=e=>({...e,headers:{...e.headers}});class n0 extends nX{constructor(e){super(e),this.constructor=n0,Object.setPrototypeOf(this,n0.prototype)}}class n1 extends n0{constructor(e={}){super({name:"CanceledError",message:"Request is canceled by user",...e}),this.constructor=n1,Object.setPrototypeOf(this,n1.prototype)}}let n2=e=>!!e&&e instanceof n1;(k||(k={})).InvalidApiName="InvalidApiName",k.InvalidApiName;let n3=e=>{let{headers:t,statusCode:n}=e;return{...n4(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},n4=e=>"object"==typeof e?.$metadata,n5=async e=>{if(!e||e.statusCode<300)return;let t=await n6(e),n=(e=>{let[t]=e.toString().split(/[,:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError");return Object.assign(Error(t.message??t.Message??"Unknown error"),{name:n,$metadata:n3(e)})},n6=async e=>{if(!e.body)throw Error("Missing response payload");return Object.assign(await e.body.json(),{$metadata:n3(e)})},n8=async e=>{if(!e)return;let t=await n5(n7(e));if(t){let n=await e.body?.text();return n9(t,{statusCode:e.statusCode,headers:e.headers,body:n})}},n7=e=>{let t;let n=new Proxy(e.body,{get:(e,n,r)=>"json"===n?async()=>{t||(t=e.text());try{return JSON.parse(await t)}catch(e){return{}}}:"text"===n?async()=>(t||(t=e.text()),t):Reflect.get(e,n,r)});return new Proxy(e,{get:(e,t,r)=>"body"===t?n:Reflect.get(e,t,r)})},n9=(e,t)=>Object.assign(new n0({name:e?.name,message:e.message,underlyingError:e,response:t}),{$metadata:e.$metadata}),re=new o("RestApis"),rt=3e5;function rn(e=rt){return t=>{let n=2**t*100+100*Math.random();return!(n>e)&&n}}let rr=3,ri=e=>{let t=rn(3e5)(e);return!1===t?3e5:t};!function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"}(R||(R={}));let ro=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],rs=e=>!!e&&ro.includes(e),ra=e=>async(t,n)=>{let r=n??await e(t)??void 0,i=r?.code||r?.name,o=t?.statusCode;return{retryable:rp(n)||rl(o,i)||rs(i)||rd(o,i)}},rc=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],ru=["TimeoutError","RequestTimeout","RequestTimeoutException"],rl=(e,t)=>429===e||!!t&&rc.includes(t),rp=e=>[R.NetworkError,"ERR_NETWORK"].includes(e?.name),rd=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&ru.includes(t),rf="execute-api",rh=/^.+\.([a-z0-9-]+)\.([a-z0-9-]+)\.amazonaws\.com/,ry=(e,t)=>{let{service:n=rf,region:r="us-east-1"}=t?.amplify.getConfig()?.API?.REST?.[t?.apiName]??{},{hostname:i}=e,[,o,s]=rh.exec(i)??[];return o===rf?{service:o,region:s??r}:"appsync-api"===o?{service:"appsync",region:s??r}:{service:n,region:r}},rm=e=>({retryStrategy:e.libraryOptions?.API?.REST?.retryStrategy,defaultAuthMode:e.libraryOptions?.API?.REST?.defaultAuthMode}),rg=(e,t)=>{let n={};for(let t in e)n[t.toLowerCase()]=e[t];if(t){let e=n["content-type"];e&&(e.startsWith("application/json")||e.startsWith("application/")&&e.includes("+json"))||(n["content-type"]="application/json; charset=UTF-8"),t instanceof FormData&&delete n["content-type"]}return n},rb=e=>{let t;return()=>(t||(t=e()),t)},rv=e=>!["HEAD","GET"].includes(e.toUpperCase()),rE=async({url:e,method:t,headers:n,body:r},{abortSignal:i,cache:o,withCrossDomainCredentials:a})=>{let c;try{c=await fetch(e,{method:t,headers:n,body:rv(t)?r:void 0,signal:i,cache:o,credentials:a?"include":"same-origin"})}catch(e){if(e instanceof TypeError)throw new s({name:R.NetworkError,message:"A network error has occurred.",underlyingError:e});throw e}let u={};c.headers?.forEach((e,t)=>{u[t.toLowerCase()]=e});let l={statusCode:c.status,headers:u,body:null},p=Object.assign(c.body??{},{text:rb(()=>c.text()),blob:rb(()=>c.blob()),json:rb(()=>c.json())});return{...l,body:p}},rS=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(r){if(0===t.trim().length)return await n(r);{let i=e.toLowerCase();return r.headers[i]=r.headers[i]?`${r.headers[i]} ${t}`:t,await n(r)}},rT=({maxAttempts:e=rr,retryDecider:t,computeDelay:n,abortSignal:r})=>{if(e<1)throw Error("maxAttempts must be greater than 0");return(i,o)=>async function(s){let a,c;let u=o.attemptsCount??0,l=()=>{if(c)return rA(c,u),c;throw rA(a,u),a};for(;!r?.aborted&&u<e;){try{c=await i(s),a=void 0}catch(e){a=e,c=void 0}u=(o.attemptsCount??0)>u?o.attemptsCount??0:u+1,o.attemptsCount=u;let{isCredentialsExpiredError:p,retryable:d}=await t(c,a,o);if(!d)return l();if(o.isCredentialsExpired=!!p,!r?.aborted&&u<e){let e=n(u);await rN(e,r)}}if(!r?.aborted)return l();throw Error("Request aborted.")}},rN=(e,t)=>{let n,r;if(t?.aborted)return Promise.resolve();let i=new Promise(t=>{r=t,n=setTimeout(t,e)});return t?.addEventListener("abort",function e(i){clearTimeout(n),t?.removeEventListener("abort",e),r()}),i},rA=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},rO=e=>Object.keys(e).map(e=>e.toLowerCase()).sort().join(";"),rw="aws4_request",r_="AWS4-HMAC-SHA256",rI="UNSIGNED-PAYLOAD",rC=(e,t,n)=>`${e}/${t}/${n}/${rw}`,rk=e=>{let t=e.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}},rR=({credentials:e,signingDate:t=new Date,signingRegion:n,signingService:r,uriEscapePath:i=!0})=>{let{accessKeyId:o,secretAccessKey:s,sessionToken:a}=e,{longDate:c,shortDate:u}=rk(t);return{accessKeyId:o,credentialScope:rC(u,n,r),longDate:c,secretAccessKey:s,sessionToken:a,shortDate:u,signingRegion:n,signingService:r,uriEscapePath:i}};var rD=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rx=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],rP=function(){function e(){this.state=Int32Array.from(rx),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>9007199254740991)throw Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%64>=56){for(var r=this.bufferLength;r<64;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(var r=this.bufferLength;r<56;r++)t.setUint8(r,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(32),r=0;r<8;r++)i[4*r]=this.state[r]>>>24&255,i[4*r+1]=this.state[r]>>>16&255,i[4*r+2]=this.state[r]>>>8&255,i[4*r+3]=this.state[r]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],c=t[6],u=t[7],l=0;l<64;l++){if(l<16)this.temp[l]=(255&e[4*l])<<24|(255&e[4*l+1])<<16|(255&e[4*l+2])<<8|255&e[4*l+3];else{var p=this.temp[l-2],d=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,f=((p=this.temp[l-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[l]=(d+this.temp[l-7]|0)+(f+this.temp[l-16]|0)}var h=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&a^~s&c)|0)+(u+(rD[l]+this.temp[l]|0)|0)|0,y=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&r^n&i^r&i)|0;u=c,c=a,a=s,s=o+h|0,o=i,i=r,r=n,n=h+y|0}t[0]+=n,t[1]+=r,t[2]+=i,t[3]+=o,t[4]+=s,t[5]+=a,t[6]+=c,t[7]+=u},e}();let rL=(e,t)=>{if("string"!=typeof e)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?e2.Buffer.from(e,t):e2.Buffer.from(e)};var rM="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>{let t=rL(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};function rU(e){return e instanceof Uint8Array?e:"string"==typeof e?rM(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var rj=function(){function e(e){this.secret=e,this.hash=new rP,this.reset()}return e.prototype.update=function(e){if(("string"==typeof e?0!==e.length:0!==e.byteLength)&&!this.error)try{this.hash.update(rU(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return B(this,void 0,void 0,function(){return G(this,function(e){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new rP,this.secret){this.outer=new rP;var e=function(e){var t=rU(e);if(t.byteLength>64){var n=new rP;n.update(t),t=n.digest()}var r=new Uint8Array(64);return r.set(t),r}(this.secret),t=new Uint8Array(64);t.set(e);for(var n=0;n<64;n++)e[n]^=54,t[n]^=92;this.hash.update(e),this.outer.update(t);for(var n=0;n<e.byteLength;n++)e[n]=0}},e}();let rF={},r$={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),rF[e]=t,r$[t]=e}let rB=(e,t)=>{let n=new rj(e??void 0);return n.update(t),n.digestSync()},rG=(e,t)=>(function(e){let t="";for(let n=0;n<e.byteLength;n++)t+=rF[e[n]];return t})(rB(e,t)),rV=e=>Object.entries(e).map(([e,t])=>({key:e.toLowerCase(),value:t?.trim().replace(/\s+/g," ")??""})).sort((e,t)=>e.key<t.key?-1:1).map(e=>`${e.key}:${e.value}
`).join(""),rK=e=>Array.from(e).sort(([e,t],[n,r])=>e===n?t<r?-1:1:e<n?-1:1).map(([e,t])=>`${rq(e)}=${rq(t)}`).join("&"),rq=e=>encodeURIComponent(e).replace(/[!'()*]/g,rW),rW=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,rz=(e,t=!0)=>e?t?encodeURIComponent(e).replace(/%2F/g,"/"):e:"/",rY=e=>null==e?"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855":rQ(e)?rG(null,e):rI,rQ=e=>e!==rI&&("string"==typeof e||ArrayBuffer.isView(e)||rJ(e)),rJ=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e),rH=({body:e,headers:t,method:n,url:r},i=!0)=>[n,rz(r.pathname,i),rK(r.searchParams),rV(t),rO(t),rY(e)].join("\n"),rX=(e,t,n,r)=>{let i=rB(`AWS4${e}`,t),o=rB(i,n),s=rB(o,r);return rB(s,rw)},rZ=(e,t,n)=>[r_,e,t,n].join("\n"),r0=(e,{credentialScope:t,longDate:n,secretAccessKey:r,shortDate:i,signingRegion:o,signingService:s,uriEscapePath:a})=>{let c=rZ(n,t,rG(null,rH(e,a)));return rG(rX(r,i,o,s),c)},r1=(e,t)=>{let n=rR(t),{accessKeyId:r,credentialScope:i,longDate:o,sessionToken:s}=n,a={...e.headers};a.host=e.url.host,a["x-amz-date"]=o,s&&(a["x-amz-security-token"]=s);let c={...e,headers:a},u=r0(c,n),l=`Credential=${r}/${i}`,p=`SignedHeaders=${rO(a)}`,d=`Signature=${u}`;return a.authorization=`${r_} ${l}, ${p}, ${d}`,c},r2=e=>new Date(Date.now()+e),r3=(e,t)=>Math.abs(r2(t).getTime()-e)>=3e5,r4=(e,t)=>r3(e,t)?e-Date.now():t,r5=({headers:e}={})=>e?.date??e?.Date??e?.["x-amz-date"],r6=(e,t)=>(n,r)=>{let i={},o=t=>e(t,r);for(let e=t.length-1;e>=0;e--)o=(0,t[e])(r)(o,i);return o(n)},r8=r6(rE,[rS,rT,({credentials:e,region:t,service:n,uriEscapePath:r=!0})=>{let i;return(o,s)=>async function(a){i=i??0;let c={credentials:"function"==typeof e?await e({forceRefresh:!!s?.isCredentialsExpired}):e,signingDate:r2(i),signingRegion:t,signingService:n,uriEscapePath:r},u=await r1(a,c),l=await o(u),p=r5(l);return p&&(i=r4(Date.parse(p),i)),l}}]),r7=r6(rE,[rS,rT]),r9=async(e,t,n,r)=>{let i;let{url:o,method:s,headers:a,body:c,withCredentials:u,abortSignal:l,retryStrategy:p}=t,d=c?c instanceof FormData?c:JSON.stringify(c??""):void 0,f={url:o,headers:rg(a,c),method:s,body:d},{retryStrategy:h,defaultAuthMode:y}=rm(e),m={retryDecider:ie(p??h),computeDelay:ri,withCrossDomainCredentials:u,abortSignal:l},g=t.defaultAuthMode??y,b=null;if("none"!==g&&(b=await it(e)),n(f,r)&&b){let e=ry(o),t=r?.service??e.service,n=r?.region??e.region;i=await r8(f,{...m,credentials:b,region:n,service:t})}else i=await r7(f,{...m});return{statusCode:i.statusCode,headers:i.headers,body:i.body}},ie=e=>"no-retry"===e?.strategy?()=>Promise.resolve({retryable:!1}):ra(n8),it=async e=>{try{let{credentials:t}=await e.Auth.fetchAuthSession();if(t)return t}catch(e){re.debug("No credentials available, the request will be unsigned.")}return null},ir=({headers:e},t)=>!e.authorization&&!e["x-api-key"]&&!!t,ii=new WeakMap,io=(e,{url:t,options:n,abortController:r})=>{let i=r??new AbortController,o=(function(e,t,n,r){let i;let o=t.signal,s=async()=>{try{let t=await e();if(t.statusCode>=300)throw await n8(t);return t}catch(e){if("AbortError"===e.name||o?.aborted===!0){if(i&&"TimeoutError"===i){let e=Error("Request timeout after undefinedms");throw e.name="TimeoutError",re.debug(e),e}{let t=i??o.reason,n=new n1({...t&&{message:t},underlyingError:e,recoverySuggestion:"The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously."});throw re.debug(n),n}}throw re.debug(e),e}};return"internal"===n?s():{response:s(),cancel:e=>{!0!==o.aborted&&(t.abort(e),e&&o.reason!==e&&(i=e))}}})(async()=>r9(e,{url:t,method:"POST",...n,abortSignal:i.signal,retryStrategy:{strategy:"jittered-exponential-backoff"}},ir,n?.signingServiceInfo),i,"internal").finally(()=>{ii.delete(o)});return o},is=(e,t)=>{let n=ii.get(e);return!!n&&(n.abort(t),t&&n.signal.reason!==t&&(n.signal.reason=t),!0)},ia=(e,t)=>{ii.set(e,t)},ic=[400,401,403],iu=["BadRequestException","UnauthorizedException"];(function(e){e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error",e.EVENT_SUBSCRIBE="subscribe",e.EVENT_PUBLISH="publish",e.EVENT_SUBSCRIBE_ACK="subscribe_success",e.EVENT_PUBLISH_ACK="publish_success",e.EVENT_STOP="unsubscribe",e.EVENT_COMPLETE="unsubscribe_success",e.EVENT_SUBSCRIBE_ERROR="subscribe_error"})(D||(D={})),function(e){e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED"}(x||(x={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING"}(P||(P={}));let il={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"};class ip extends Error{constructor(){super(...arguments),this.nonRetryable=!0}}var id=n(4770);let ih={randomUUID:id.randomUUID},iy=new Uint8Array(256),im=iy.length,ig=[];for(let e=0;e<256;++e)ig.push((e+256).toString(16).slice(1));let ib=function(e,t,n){if(ih.randomUUID&&!t&&!e)return ih.randomUUID();let r=(e=e||{}).random??e.rng?.()??(im>iy.length-16&&((0,id.randomFillSync)(iy),im=0),iy.slice(im,im+=16));if(r.length<16)throw Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(ig[e[t+0]]+ig[e[t+1]]+ig[e[t+2]]+ig[e[t+3]]+"-"+ig[e[t+4]]+ig[e[t+5]]+"-"+ig[e[t+6]]+ig[e[t+7]]+"-"+ig[e[t+8]]+ig[e[t+9]]+"-"+ig[e[t+10]]+ig[e[t+11]]+ig[e[t+12]]+ig[e[t+13]]+ig[e[t+14]]+ig[e[t+15]]).toLowerCase()}(r)},iv=e=>e&&e.nonRetryable,iE=()=>{if("undefined"!=typeof window&&"function"==typeof window.btoa)return window.btoa;if("function"==typeof btoa)return btoa;throw new s({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},iS={convert(e,t={urlSafe:!1,skipPadding:!1}){let n="string"==typeof e?e:Array.from(e,e=>String.fromCodePoint(e)).join(""),r=iE()(n);return t.urlSafe&&(r=r.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(r=r.replace(/=/g,"")),r}},iT=new o("retryUtil");async function iN(e,t,n,r){if("function"!=typeof e)throw Error("functionToRetry must be a function");return new Promise(async(i,o)=>{let s,a,c=0,u=!1,l=()=>{};for(r&&r.then(()=>{u=!0,clearTimeout(s),l()});!u;){c++,iT.debug(`${e.name} attempt #${c} with this vars: ${JSON.stringify(t)}`);try{i(await e(...t));return}catch(i){if(a=i,iT.debug(`error on ${e.name}`,i),iv(i)){iT.debug(`${e.name} non retryable error`,i),o(i);return}let r=n(c,t,i);if(iT.debug(`${e.name} retrying in ${r} ms`),!1===r||u){o(i);return}await new Promise(e=>{s=setTimeout(l=e,r)})}}o(a)})}let iA=(e,t,n=rt,r)=>iN(e,t,rn(n),r);(function(e){e.CONNECTION_CLOSED="Connection closed",e.CONNECTION_FAILED="Connection failed",e.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",e.SUBSCRIPTION_ACK="Subscription ack",e.TIMEOUT_DISCONNECT="Timeout disconnect"})(L||(L={})),function(e){e.Connected="Connected",e.ConnectedPendingNetwork="ConnectedPendingNetwork",e.ConnectionDisrupted="ConnectionDisrupted",e.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",e.Connecting="Connecting",e.ConnectedPendingDisconnect="ConnectedPendingDisconnect",e.Disconnected="Disconnected",e.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive"}(M||(M={}));let iO=()=>{if("undefined"==typeof self)return!1;let e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope};class iw{networkMonitor(e){let t=iO()?self:"undefined"!=typeof window&&window;return t?new tC(e=>{e.next({online:t.navigator.onLine});let n=()=>{e.next({online:!0})},r=()=>{e.next({online:!1})};return t.addEventListener("online",n),t.addEventListener("offline",r),iw._observers.push(e),()=>{t.removeEventListener("online",n),t.removeEventListener("offline",r),iw._observers=iw._observers.filter(t=>t!==e)}}):nC([{online:!0}])}static _observerOverride(e){for(let t of this._observers){if(t.closed){this._observers=this._observers.filter(e=>e!==t);continue}t?.next&&t.next(e)}}}iw._observers=[];let i_=()=>new iw().networkMonitor(),iI={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}};class iC{constructor(){this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=i_().subscribe(({online:e})=>{this.record(e?iI.ONLINE:iI.OFFLINE),this._initialNetworkStateSubscription?.unsubscribe()}),this._linkedConnectionStateObservable=new tC(e=>{e.next(this._linkedConnectionState),this._linkedConnectionStateObserver=e})}enableNetworkMonitoring(){this._initialNetworkStateSubscription?.unsubscribe(),void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=i_().subscribe(({online:e})=>{this.record(e?iI.ONLINE:iI.OFFLINE)}))}disableNetworkMonitoring(){this._networkMonitoringSubscription?.unsubscribe(),this._networkMonitoringSubscription=void 0}get connectionStateObservable(){var e;let t;return this._linkedConnectionStateObservable.pipe(ey(e=>this.connectionStatesTranslator(e))).pipe((e=e=>{let n=e!==t;return t=e,n},d(function(t,n){var r,i,o,s=0;t.subscribe(new eh(n,function(t){return e.call(void 0,t,s++)&&n.next(t)},void 0,void 0,void 0))})))}record(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();let t={...this._linkedConnectionState,...e};this._linkedConnectionState={...t},this._linkedConnectionStateObserver?.next(this._linkedConnectionState)}connectionStatesTranslator({connectionState:e,networkState:t,intendedConnectionState:n,keepAliveState:r}){return"connected"===e&&"disconnected"===t?M.ConnectedPendingNetwork:"connected"===e&&"disconnected"===n?M.ConnectedPendingDisconnect:"disconnected"===e&&"connected"===n&&"disconnected"===t?M.ConnectionDisruptedPendingNetwork:"disconnected"===e&&"connected"===n?M.ConnectionDisrupted:"connected"===e&&"unhealthy"===r?M.ConnectedPendingKeepAlive:"connecting"===e?M.Connecting:"disconnected"===e?M.Disconnected:M.Connected}}!function(e){e.START_RECONNECT="START_RECONNECT",e.HALT_RECONNECT="HALT_RECONNECT"}(U||(U={}));class ik{constructor(){this.reconnectObservers=[]}addObserver(e){this.reconnectObservers.push(e)}record(e){e===U.START_RECONNECT&&void 0===this.reconnectSetTimeoutId&&void 0===this.reconnectIntervalId&&(this.reconnectSetTimeoutId=setTimeout(()=>{this._triggerReconnect(),this.reconnectIntervalId=setInterval(()=>{this._triggerReconnect()},6e4)},5e3)),e===U.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))}close(){this.reconnectObservers.forEach(e=>{e.complete?.()})}_triggerReconnect(){this.reconnectObservers.forEach(e=>{e.next?.()})}}let iR="wss://",iD=/^https:\/\/\w{26}\.appsync-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,ix=/^https:\/\/\w{26}\.\w+-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/event$/i,iP="/realtime",iL=e=>null===e.match(iD),iM=e=>null!==e.match(ix),iU=e=>{let t=e??"";return new nR(t=(t=iM(t)?t.concat(iP).replace("ddpg-api","grt-gamma").replace("appsync-api","appsync-realtime-api"):iL(t)?t.concat(iP):t.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta").replace("ddpg-api","grt-gamma")).replace("https://",iR).replace("http://",iR))},ij=e=>{if(!e)return{};if("Authorization"in e){let{Authorization:t,...n}=e;return n}return e},iF=e=>{let t=ij(e),n=new nD;return Object.entries(t).forEach(([e,t])=>{n.append(e,t)}),n},i$=(e,t)=>{let n=iU(e),r=new nD(n.search);for(let[e,n]of t.entries())r.append(e,n);return n.search=r.toString(),n.toString()},iB=async e=>{let{appSyncGraphqlEndpoint:t,query:n,libraryConfigHeaders:r=()=>({}),additionalHeaders:i={},authToken:o}=e,s={},a=await r();return s="function"==typeof i?await i({url:t||"",queryString:n||""}):i,o&&(s={...s,Authorization:o}),{additionalCustomHeaders:s,libraryConfigHeaders:a}},iG=e=>{for(let t of Reflect.ownKeys(e)){let n=e[t];(n&&"object"==typeof n||"function"==typeof n)&&iG(n)}return Object.freeze(e)},iV=Symbol("oauth-listener"),iK=new o("parseAWSExports"),iq={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},iW=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new s({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});let{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:r,aws_appsync_region:i,aws_bots_config:o,aws_cognito_identity_pool_id:a,aws_cognito_sign_up_verification_method:c,aws_cognito_mfa_configuration:u,aws_cognito_mfa_types:l,aws_cognito_password_protection_settings:p,aws_cognito_verification_mechanisms:d,aws_cognito_signup_attributes:f,aws_cognito_social_providers:h,aws_cognito_username_attributes:y,aws_mandatory_sign_in:m,aws_mobile_analytics_app_id:g,aws_mobile_analytics_app_region:b,aws_user_files_s3_bucket:v,aws_user_files_s3_bucket_region:E,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:S,aws_user_pools_id:T,aws_user_pools_web_client_id:N,geo:A,oauth:O,predictions:w,aws_cloud_logic_custom:_,Notifications:I,modelIntrospection:C}=e,k={};g&&(k.Analytics={Pinpoint:{appId:g,region:b}});let{InAppMessaging:R,Push:D}=I??{};if(R?.AWSPinpoint||D?.AWSPinpoint){if(R?.AWSPinpoint){let{appId:e,region:t}=R.AWSPinpoint;k.Notifications={InAppMessaging:{Pinpoint:{appId:e,region:t}}}}if(D?.AWSPinpoint){let{appId:e,region:t}=D.AWSPinpoint;k.Notifications={...k.Notifications,PushNotification:{Pinpoint:{appId:e,region:t}}}}}if(Array.isArray(o)&&(k.Interactions={LexV1:Object.fromEntries(o.map(e=>[e.name,e]))}),r){let e=iq[n];e||iK.debug(`Invalid authentication type ${n}. Falling back to IAM.`),k.API={GraphQL:{endpoint:r,apiKey:t,region:i,defaultAuthMode:e??"iam"}},C&&(k.API.GraphQL.modelIntrospection=C)}let x=u?{status:u&&u.toLowerCase(),totpEnabled:l?.includes("TOTP")??!1,smsEnabled:l?.includes("SMS")??!1}:void 0,P=p?{minLength:p.passwordPolicyMinLength,requireLowercase:p.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:p.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:p.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:p.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,L=Array.from(new Set([...d??[],...f??[]])).reduce((e,t)=>({...e,[t.toLowerCase()]:{required:!0}}),{}),M=y?.includes("EMAIL")??!1,U=y?.includes("PHONE_NUMBER")??!1;(a||T)&&(k.Auth={Cognito:{identityPoolId:a,allowGuestAccess:"enable"!==m,signUpVerificationMethod:c,userAttributes:L,userPoolClientId:N,userPoolId:T,mfa:x,passwordFormat:P,loginWith:{username:!(M||U),email:M,phone:U}}});let j=!!O&&Object.keys(O).length>0,F=!!h&&h.length>0;if(k.Auth&&j&&(k.Auth.Cognito.loginWith={...k.Auth.Cognito.loginWith,oauth:{...iY(O),...F&&{providers:iQ(h)}}}),v&&(k.Storage={S3:{bucket:v,region:E,dangerouslyConnectToHttpEndpointForTesting:S}}),A){let{amazon_location_service:e}=A;k.Geo={LocationService:{maps:e.maps,geofenceCollections:e.geofenceCollections,searchIndices:e.search_indices,region:e.region}}}if(_&&(k.API={...k.API,REST:_.reduce((e,t)=>{let{name:n,endpoint:r,region:i,service:o}=t;return{...e,[n]:{endpoint:r,...o?{service:o}:void 0,...i?{region:i}:void 0}}},{})}),w){let{VoiceId:e}=w?.convert?.speechGenerator?.defaults??{};k.Predictions=e?{...w,convert:{...w.convert,speechGenerator:{...w.convert.speechGenerator,defaults:{voiceId:e}}}}:w}return k},iz=e=>e?.split(",")??[],iY=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:r,responseType:i})=>({domain:e,scopes:t,redirectSignIn:iz(n),redirectSignOut:iz(r),responseType:i}),iQ=e=>e.map(e=>{let t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}),iJ={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"},iH={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"},iX=e=>Object.keys(e).some(e=>e.startsWith("aws_"))?iW(e):!function(e){let{version:t}=e;return!!t&&t.startsWith("1")}(e)?e:function(e){let t={};if(e.storage&&(t.Storage=function(e){if(!e)return;let{bucket_name:t,aws_region:n,buckets:r}=e;return{S3:{bucket:t,region:n,buckets:r&&function(e){let t={};return e.forEach(({name:e,bucket_name:n,aws_region:r,paths:i})=>{if(e in t)throw Error(`Duplicate friendly name found: ${e}. Name must be unique.`);let o=i?Object.entries(i).reduce((e,[t,n])=>(void 0!==n&&(e[t]=n),e),{}):void 0;t[e]={bucketName:n,region:r,paths:o}}),t}(r)}}}(e.storage)),e.auth&&(t.Auth=function(e){if(!e)return;let{user_pool_id:t,user_pool_client_id:n,identity_pool_id:r,password_policy:i,mfa_configuration:o,mfa_methods:s,unauthenticated_identities_enabled:a,oauth:c,username_attributes:u,standard_required_attributes:l,groups:p,passwordless:d}=e,f={Cognito:{userPoolId:t,userPoolClientId:n,groups:p}};return r&&(f.Cognito={...f.Cognito,identityPoolId:r}),i&&(f.Cognito.passwordFormat={requireLowercase:i.require_lowercase,requireNumbers:i.require_numbers,requireUppercase:i.require_uppercase,requireSpecialCharacters:i.require_symbols,minLength:i.min_length??6}),o&&(f.Cognito.mfa={status:"OPTIONAL"===o?"optional":"REQUIRED"===o?"on":"off",smsEnabled:s?.includes("SMS"),totpEnabled:s?.includes("TOTP")}),a&&(f.Cognito.allowGuestAccess=a),c&&(f.Cognito.loginWith={oauth:{domain:c.domain,redirectSignIn:c.redirect_sign_in_uri,redirectSignOut:c.redirect_sign_out_uri,responseType:"token"===c.response_type?"token":"code",scopes:c.scopes,providers:function(e=[]){return e.reduce((e,t)=>(void 0!==iH[t]&&e.push(iH[t]),e),[])}(c.identity_providers)}}),u&&(f.Cognito.loginWith={...f.Cognito.loginWith,email:u.includes("email"),phone:u.includes("phone_number"),username:u.includes("username")}),l&&(f.Cognito.userAttributes=l.reduce((e,t)=>({...e,[t]:{required:!0}}),{})),d&&(f.Cognito.passwordless={emailOtpEnabled:d.email_otp_enabled,smsOtpEnabled:d.sms_otp_enabled,webAuthn:d.web_authn?{relyingPartyId:d.web_authn.relying_party_id,userVerification:d.web_authn.user_verification}:void 0,preferredChallenge:d.preferred_challenge}),f}(e.auth)),e.analytics&&(t.Analytics=function(e){if(!e?.amazon_pinpoint)return;let{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}(e.analytics)),e.geo&&(t.Geo=function(e){if(!e)return;let{aws_region:t,geofence_collections:n,maps:r,search_indices:i}=e;return{LocationService:{region:t,searchIndices:i,geofenceCollections:n,maps:r}}}(e.geo)),e.data&&(t.API=function(e){if(!e)return;let{aws_region:t,default_authorization_type:n,url:r,api_key:i,model_introspection:o}=e;return{GraphQL:{endpoint:r,defaultAuthMode:iJ[n],region:t,apiKey:i,modelIntrospection:o}}}(e.data)),e.custom){let n=function(e){if(!e?.events)return;let{url:t,aws_region:n,api_key:r,default_authorization_type:i}=e.events;return{Events:{endpoint:t,defaultAuthMode:iJ[i],region:n,apiKey:r}}}(e.custom);n&&"Events"in n&&(t.API={...t.API,...n})}return e.notifications&&(t.Notifications=function(e){if(!e)return;let{aws_region:t,channels:n,amazon_pinpoint_app_id:r}=e,i=n.includes("IN_APP_MESSAGING"),o=n.includes("APNS")||n.includes("FCM");if(!(i||o))return;let s={};return i&&(s.InAppMessaging={Pinpoint:{appId:r,region:t}}),o&&(s.PushNotification={Pinpoint:{appId:r,region:t}}),s}(e.notifications)),t}(e),iZ=new o("Auth");class i0{configure(e,t){this.authConfig=e,this.authOptions=t,e&&e.Cognito?.userPoolEndpoint&&iZ.warn(i1("Amazon Cognito User Pool")),e&&e.Cognito?.identityPoolEndpoint&&iZ.warn(i1("Amazon Cognito Identity Pool"))}async fetchAuthSession(e={}){let t,n;let r=await this.getTokens(e);return r?(n=r.accessToken?.payload?.sub,t=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:r,authenticated:!0,forceRefresh:e.forceRefresh})):t=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh}),{tokens:r,credentials:t?.credentials,identityId:t?.identityId,userSub:n}}async clearCredentials(){await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()}async getTokens(e){return await this.authOptions?.tokenProvider?.getTokens(e)??void 0}}let i1=e=>`You are using a custom Amazon ${e} endpoint, ensure the endpoint is correct.`;class i2{constructor(){this.oAuthListener=void 0,this.isConfigured=!1,this.resourcesConfig={},this.libraryOptions={},this.Auth=new i0}configure(e,t){let n=iX(e);this.resourcesConfig=n,t&&(this.libraryOptions=t),this.resourcesConfig=iG(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),(this.resourcesConfig.Analytics?.Pinpoint||this.resourcesConfig.Notifications?.InAppMessaging?.Pinpoint||this.resourcesConfig.Notifications?.PushNotification?.Pinpoint)&&console.warn("AWS will end support for Amazon Pinpoint on October 30, 2026. The guidance is to use AWS End User Messaging for push notifications and SMS, Amazon Simple Email Service for sending emails, Amazon Connect for campaigns, journeys, endpoints, and engagement analytics. Pinpoint recommends Amazon Kinesis for event collection and mobile analytics."),l.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",a),this.notifyOAuthListener(),this.isConfigured=!0}getConfig(){return this.isConfigured||console.warn("Amplify has not been configured. Please call Amplify.configure() before using this service."),this.resourcesConfig}[iV](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}}let i3=new i2,i4=(e,t)=>e.Auth.fetchAuthSession(t),i5=e=>i4(i3,e),i6=new o("AWSAppSyncRealTimeProvider Auth"),i8=async({host:e})=>{let t=await i5();return{Authorization:t?.tokens?.accessToken?.toString(),host:e}},i7=async({apiKey:e,host:t})=>({host:t,"x-amz-date":new Date().toISOString().replace(/[:-]|\.\d{3}/g,""),"x-api-key":e}),i9=async({payload:e,canonicalUri:t,appSyncGraphqlEndpoint:n,region:r})=>{let i={region:r,service:"appsync"},o=(await i5()).credentials,s={url:`${n}${t}`,data:e,method:"POST",headers:{...il}};return r1({headers:s.headers,method:s.method,url:new nR(s.url),body:s.data},{credentials:o,signingRegion:i.region,signingService:i.service}).headers},oe=async({host:e,additionalCustomHeaders:t})=>{if(!t?.Authorization)throw Error("No auth token specified");return{Authorization:t.Authorization,host:e}},ot=async({apiKey:e,authenticationType:t,canonicalUri:n,appSyncGraphqlEndpoint:r,region:i,additionalCustomHeaders:o,payload:s})=>{let a={apiKey:i7,iam:i9,oidc:i8,userPool:i8,lambda:oe,none:oe};if(t&&a[t]){let c=a[t],u=r?new nR(r).host:void 0;return i6.debug(`Authenticating with ${JSON.stringify(t)}`),await c({payload:s,canonicalUri:n,appSyncGraphqlEndpoint:r,apiKey:"apiKey"===t?e:void 0,region:i,host:u,additionalCustomHeaders:o})}i6.debug(`Authentication type ${t} not supported`)},on=e=>{l.dispatch("api",e,"PubSub",a)};class or{constructor(e){this.subscriptionObserverMap=new Map,this.allowNoSubscriptions=!1,this.socketStatus=P.CLOSED,this.keepAliveTimestamp=Date.now(),this.promiseArray=[],this.connectionStateMonitor=new iC,this.reconnectionMonitor=new ik,this._establishConnection=async(e,t)=>{this.logger.debug(`Establishing WebSocket connection to ${e}`);try{await this._openConnection(e,t),await this._initiateHandshake()}catch(n){let{errorType:e,errorCode:t}=n;if(ic.includes(t)||iu.includes(e))throw new ip(e);if(e)throw Error(e);throw n}},this.logger=new o(e.providerName),this.wsProtocolName=e.wsProtocolName,this.wsConnectUri=e.connectUri,this.connectionStateMonitorSubscription=this._startConnectionStateMonitoring()}close(){return this.socketStatus=P.CLOSED,this.connectionStateMonitor.record(iI.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close(),new Promise((e,t)=>{this.awsRealTimeSocket?(this.awsRealTimeSocket.onclose=t=>{this._closeSocket(),this.subscriptionObserverMap=new Map,this.awsRealTimeSocket=void 0,e()},this.awsRealTimeSocket.onerror=e=>{t(e)},this.awsRealTimeSocket.close()):e()})}subscribe(e,t){return new tC(n=>{if(!e?.appSyncGraphqlEndpoint){n.error({errors:[{...new t3("Subscribe only available for AWS AppSync endpoint")}]}),n.complete();return}let r=!1,i=ib(),o=()=>{r||(r=!0,this._startSubscriptionWithAWSAppSyncRealTime({options:e,observer:n,subscriptionId:i,customUserAgentDetails:t}).catch(e=>{this.logger.debug(`${L.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${e}`),this._closeSocket()}).finally(()=>{r=!1}))},s=new tC(e=>{this.reconnectionMonitor.addObserver(e)}).subscribe(()=>{o()});return o(),async()=>{await this._cleanupSubscription(i,s)}})}async connect(e){this.socketStatus!==P.READY&&await this._connectWebSocket(e)}async publish(e,t){if(this.socketStatus!==P.READY)throw Error("Subscription has not been initialized");return this._publishMessage(e,t)}async _connectWebSocket(e){let{apiKey:t,appSyncGraphqlEndpoint:n,authenticationType:r,region:i}=e,{additionalCustomHeaders:o}=await iB(e);this.connectionStateMonitor.record(iI.OPENING_CONNECTION),await this._initializeWebSocketConnection({apiKey:t,appSyncGraphqlEndpoint:n,authenticationType:r,region:i,additionalCustomHeaders:o})}async _publishMessage(e,t){let n=ib(),{additionalCustomHeaders:r,libraryConfigHeaders:i}=await iB(e),o=await this._prepareSubscriptionPayload({options:e,subscriptionId:n,customUserAgentDetails:t,additionalCustomHeaders:r,libraryConfigHeaders:i,publish:!0});return new Promise((e,t)=>{if(this.awsRealTimeSocket){let r=i=>{let o=JSON.parse(i.data);if(o.id===n&&"publish_success"===o.type&&(this.awsRealTimeSocket&&this.awsRealTimeSocket.removeEventListener("message",r),a(),e()),o.errors&&o.errors.length>0){let e=o.errors.map(e=>e.errorType);a(),t(Error(`Publish errors: ${e.join(", ")}`))}},i=e=>{a(),t(Error(`WebSocket error: ${e}`))},s=()=>{a(),t(Error("WebSocket is closed"))},a=()=>{this.awsRealTimeSocket?.removeEventListener("message",r),this.awsRealTimeSocket?.removeEventListener("error",i),this.awsRealTimeSocket?.removeEventListener("close",s)};this.awsRealTimeSocket.addEventListener("message",r),this.awsRealTimeSocket.addEventListener("error",i),this.awsRealTimeSocket.addEventListener("close",s),this.awsRealTimeSocket.send(o)}else t(Error("WebSocket is not connected"))})}async _cleanupSubscription(e,t){t?.unsubscribe();try{await this._waitForSubscriptionToBeConnected(e);let{subscriptionState:t}=this.subscriptionObserverMap.get(e)||{};if(!t)return;if(t===x.CONNECTED)this._sendUnsubscriptionMessage(e);else throw Error("Subscription never connected")}catch(e){this.logger.debug(`Error while unsubscribing ${e}`)}finally{this._removeSubscriptionObserver(e)}}_startConnectionStateMonitoring(){return this.connectionStateMonitor.connectionStateObservable.subscribe(e=>{on({event:"ConnectionStateChange",data:{provider:this,connectionState:e},message:`Connection state is ${e}`}),this.connectionState=e,e===M.ConnectionDisrupted&&this.reconnectionMonitor.record(U.START_RECONNECT),[M.Connected,M.ConnectedPendingDisconnect,M.ConnectedPendingKeepAlive,M.ConnectedPendingNetwork,M.ConnectionDisruptedPendingNetwork,M.Disconnected].includes(e)&&this.reconnectionMonitor.record(U.HALT_RECONNECT)})}async _startSubscriptionWithAWSAppSyncRealTime({options:e,observer:t,subscriptionId:n,customUserAgentDetails:r}){let{query:i,variables:o}=e;this.subscriptionObserverMap.set(n,{observer:t,query:i??"",variables:o??{},subscriptionState:x.PENDING,startAckTimeoutId:void 0});let{additionalCustomHeaders:s,libraryConfigHeaders:a}=await iB(e),c=await this._prepareSubscriptionPayload({options:e,subscriptionId:n,customUserAgentDetails:r,additionalCustomHeaders:s,libraryConfigHeaders:a});try{await this._connectWebSocket(e)}catch(e){this._logStartSubscriptionError(n,t,e);return}let{subscriptionFailedCallback:u,subscriptionReadyCallback:l}=this.subscriptionObserverMap.get(n)??{};this.subscriptionObserverMap.set(n,{observer:t,subscriptionState:x.PENDING,query:i??"",variables:o??{},subscriptionReadyCallback:l,subscriptionFailedCallback:u,startAckTimeoutId:setTimeout(()=>{this._timeoutStartSubscriptionAck(n)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(c)}_logStartSubscriptionError(e,t,n){this.logger.debug({err:n});let r=String(n.message??"");if(this._closeSocket(),this.connectionState!==M.ConnectionDisruptedPendingNetwork){iv(n)?t.error({errors:[{...new t3(`${L.CONNECTION_FAILED}: ${r}`)}]}):this.logger.debug(`${L.CONNECTION_FAILED}: ${r}`);let{subscriptionFailedCallback:i}=this.subscriptionObserverMap.get(e)||{};"function"==typeof i&&i()}}async _waitForSubscriptionToBeConnected(e){let t=this.subscriptionObserverMap.get(e);if(t){let{subscriptionState:n}=t;if(n===x.PENDING)return new Promise((n,r)=>{let{observer:i,subscriptionState:o,variables:s,query:a}=t;this.subscriptionObserverMap.set(e,{observer:i,subscriptionState:o,variables:s,query:a,subscriptionReadyCallback:n,subscriptionFailedCallback:r})})}}_sendUnsubscriptionMessage(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===P.READY){let t=this._unsubscribeMessage(e),n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){this.logger.debug({err:e})}}_removeSubscriptionObserver(e){this.subscriptionObserverMap.delete(e),this.allowNoSubscriptions||setTimeout(this._closeSocketIfRequired.bind(this),1e3)}_closeSocketIfRequired(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket){this.socketStatus=P.CLOSED;return}if(this.connectionStateMonitor.record(iI.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{this.logger.debug("closing WebSocket...");let e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=P.CLOSED,this._closeSocket()}}}maintainKeepAlive(){this.keepAliveTimestamp=Date.now()}keepAliveHeartbeat(e){let t=Date.now();t-this.keepAliveTimestamp>65e3?this.connectionStateMonitor.record(iI.KEEP_ALIVE_MISSED):this.connectionStateMonitor.record(iI.KEEP_ALIVE),t-this.keepAliveTimestamp>e&&this._errorDisconnect(L.TIMEOUT_DISCONNECT)}_handleIncomingSubscriptionMessage(e){if("string"!=typeof e.data)return;let[t,n]=this._handleSubscriptionData(e);if(t){this.maintainKeepAlive();return}let{type:r,id:i,payload:o}=n,{observer:s=null,query:a="",variables:c={},startAckTimeoutId:u,subscriptionReadyCallback:l,subscriptionFailedCallback:p}=this.subscriptionObserverMap.get(i)||{};if(r===D.GQL_START_ACK||r===D.EVENT_SUBSCRIBE_ACK){this.logger.debug(`subscription ready for ${JSON.stringify({query:a,variables:c})}`),"function"==typeof l&&l(),u&&clearTimeout(u),on({event:L.SUBSCRIPTION_ACK,data:{query:a,variables:c},message:"Connection established for subscription"});let e=x.CONNECTED;s&&this.subscriptionObserverMap.set(i,{observer:s,query:a,variables:c,startAckTimeoutId:void 0,subscriptionState:e,subscriptionReadyCallback:l,subscriptionFailedCallback:p}),this.connectionStateMonitor.record(iI.CONNECTION_ESTABLISHED);return}if(r===D.GQL_CONNECTION_KEEP_ALIVE){this.maintainKeepAlive();return}if(r===D.GQL_ERROR||r===D.EVENT_SUBSCRIBE_ERROR){let t=x.FAILED;if(s){this.subscriptionObserverMap.set(i,{observer:s,query:a,variables:c,startAckTimeoutId:u,subscriptionReadyCallback:l,subscriptionFailedCallback:p,subscriptionState:t});let d=JSON.stringify(o??n);if(r===D.EVENT_SUBSCRIBE_ERROR){let{errors:t}=JSON.parse(String(e.data));if(Array.isArray(t)&&t.length>0){let e=t[0];d=`${e.errorType}: ${e.message}`}}this.logger.debug(`${L.CONNECTION_FAILED}: ${d}`),s.error({errors:[{...new t3(`${L.CONNECTION_FAILED}: ${d}`)}]}),u&&clearTimeout(u),"function"==typeof p&&p()}}}_errorDisconnect(e){this.logger.debug(`Disconnect error: ${e}`),this.awsRealTimeSocket&&(this._closeSocket(),this.awsRealTimeSocket.close()),this.socketStatus=P.CLOSED}_closeSocket(){this.keepAliveHeartbeatIntervalId&&(clearInterval(this.keepAliveHeartbeatIntervalId),this.keepAliveHeartbeatIntervalId=void 0),this.connectionStateMonitor.record(iI.CLOSED)}_timeoutStartSubscriptionAck(e){let t=this.subscriptionObserverMap.get(e);if(t){let{observer:n,query:r,variables:i}=t;if(!n)return;this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:x.FAILED}),this._closeSocket(),this.logger.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i}))}}_initializeWebSocketConnection({appSyncGraphqlEndpoint:e,authenticationType:t,apiKey:n,region:r,additionalCustomHeaders:i}){if(this.socketStatus!==P.READY)return new Promise(async(o,s)=>{if(this.promiseArray.push({res:o,rej:s}),this.socketStatus===P.CLOSED)try{this.socketStatus=P.CONNECTING;let o=await ot({authenticationType:t,payload:"{}",canonicalUri:this.wsConnectUri,apiKey:n,appSyncGraphqlEndpoint:e,region:r,additionalCustomHeaders:i}),s=o?JSON.stringify(o):"",a=iS.convert(s,{urlSafe:!0,skipPadding:!0}),c=`header-${a}`,u=iF(i),l=i$(e,u);await this._establishRetryableConnection(l,c),this.promiseArray.forEach(({res:e})=>{this.logger.debug("Notifying connection successful"),e()}),this.socketStatus=P.READY,this.promiseArray=[]}catch(e){this.logger.debug("Connection exited with",e),this.promiseArray.forEach(({rej:t})=>{t(e)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=P.CLOSED}})}async _establishRetryableConnection(e,t){this.logger.debug("Establishing retryable connection"),await iA(this._establishConnection.bind(this),[e,t],5e3)}async _openConnection(e,t){return new Promise((n,r)=>{let i=this._getNewWebSocket(e,[this.wsProtocolName,t]);i.onerror=()=>{this.logger.debug("WebSocket connection error")},i.onclose=()=>{this._closeSocket(),r(Error("Connection handshake error"))},i.onopen=()=>{this.awsRealTimeSocket=i,n()}})}_getNewWebSocket(e,t){return new WebSocket(e,t)}async _initiateHandshake(){return new Promise((e,t)=>{if(!this.awsRealTimeSocket){t(Error("awsRealTimeSocket undefined"));return}let n=!1;this.awsRealTimeSocket.onerror=e=>{this.logger.debug(`WebSocket error ${JSON.stringify(e)}`)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),t(Error(JSON.stringify(e)))},this.awsRealTimeSocket.onmessage=r=>{if("string"!=typeof r.data)return;this.logger.debug(`subscription message from AWS AppSyncRealTime: ${r.data} `);let i=JSON.parse(r.data),{type:o}=i,s=this._extractConnectionTimeout(i);if(o===D.GQL_CONNECTION_ACK){n=!0,this._registerWebsocketHandlers(s),e("Connected to AWS AppSyncRealTime");return}if(o===D.GQL_CONNECTION_ERROR){let{errorType:e,errorCode:n}=this._extractErrorCodeAndType(i);t({errorType:e,errorCode:n})}};let r={type:D.GQL_CONNECTION_INIT};this.awsRealTimeSocket.send(JSON.stringify(r));let i=e=>{e||(this.connectionStateMonitor.record(iI.CONNECTION_FAILED),t(Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))};setTimeout(()=>{i(n)},15e3)})}_registerWebsocketHandlers(e){this.awsRealTimeSocket&&(this.keepAliveHeartbeatIntervalId=setInterval(()=>{this.keepAliveHeartbeat(e)},5e3),this.awsRealTimeSocket.onmessage=this._handleIncomingSubscriptionMessage.bind(this),this.awsRealTimeSocket.onerror=e=>{this.logger.debug(e),this._errorDisconnect(L.CONNECTION_CLOSED)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),this._errorDisconnect(L.CONNECTION_CLOSED)})}}let oi="AWSAppSyncRealTimeProvider";class oo extends or{constructor(){super({providerName:oi,wsProtocolName:"graphql-ws",connectUri:"/connect"})}getProviderName(){return oi}subscribe(e,t){return super.subscribe(e,t)}async _prepareSubscriptionPayload({options:e,subscriptionId:t,customUserAgentDetails:n,additionalCustomHeaders:r,libraryConfigHeaders:i}){let{appSyncGraphqlEndpoint:o,authenticationType:s,query:a,variables:c,apiKey:u,region:l}=e,p=JSON.stringify({query:a,variables:c}),d={...await ot({apiKey:u,appSyncGraphqlEndpoint:o,authenticationType:s,payload:p,canonicalUri:"",region:l,additionalCustomHeaders:r}),...i,...r,"x-amz-user-agent":nH(n)};return JSON.stringify({id:t,payload:{data:p,extensions:{authorization:{...d}}},type:D.GQL_START})}_handleSubscriptionData(e){this.logger.debug(`subscription message from AWS AppSync RealTime: ${e.data}`);let{id:t="",payload:n,type:r}=JSON.parse(String(e.data)),{observer:i=null,query:o="",variables:s={}}=this.subscriptionObserverMap.get(t)||{};return(this.logger.debug({id:t,observer:i,query:o,variables:s}),r===D.DATA&&n&&n.data)?(i?i.next(n):this.logger.debug(`observer not found for id: ${t}`),[!0,{id:t,type:r,payload:n}]):[!1,{id:t,type:r,payload:n}]}_unsubscribeMessage(e){return{id:e,type:D.GQL_STOP}}_extractConnectionTimeout(e){let{payload:{connectionTimeoutMs:t=3e5}={}}=e;return t}_extractErrorCodeAndType(e){let{payload:{errors:[{errorType:t="",errorCode:n=0}={}]=[]}={}}=e;return{errorCode:n,errorType:t}}}class os extends s{constructor(e){super(e),this.constructor=os,Object.setPrototypeOf(this,os.prototype)}}!function(e){e.NoAuthSession="NoAuthSession",e.NoRegion="NoRegion",e.NoCustomEndpoint="NoCustomEndpoint"}(j||(j={}));let oa={[j.NoAuthSession]:{message:"Auth session should not be empty."},[j.NoRegion]:{message:"Missing region."},[j.NoCustomEndpoint]:{message:"Custom endpoint region is present without custom endpoint."}},oc=new o("GraphQLAPI resolveConfig"),ou=e=>{let t=e.getConfig();t.API?.GraphQL||oc.warn("The API configuration is missing. This is likely due to Amplify.configure() not being called prior to generateClient().");let{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:s,region:a}=t.API?.GraphQL??{};return function(e,t){let{message:n,recoverySuggestion:r}=oa[t];if(!e)throw new os({name:t,message:n,recoverySuggestion:r})}(!(!r&&i),j.NoCustomEndpoint),{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:s,region:a}},ol=e=>({headers:e.libraryOptions?.API?.GraphQL?.headers,withCredentials:e.libraryOptions?.API?.GraphQL?.withCredentials});function op(e){return e.errors&&Array.isArray(e.errors)&&e.errors.forEach(e=>{(e?.originalError?.name?.startsWith("UnauthorizedException")||e.message?.startsWith("Connection failed:")&&e.message?.includes("Permission denied"))&&(e.message="Unauthorized",e.recoverySuggestion="If you're calling an Amplify-generated API, make sure to set the \"authMode\" in generateClient({ authMode: '...' }) to the backend authorization rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')")}),e}let od={name:"NoApiKey",message:y.NO_API_KEY,recoverySuggestion:'The API request was made with `authMode: "apiKey"` but no API Key was passed into `Amplify.configure()`. Review if your API key is passed into the `Amplify.configure()` function.'},of={name:"NoCredentials",message:y.NO_CREDENTIALS,recoverySuggestion:`The API request was made with \`authMode: "iam"\` but no authentication credentials are available.

If you intended to make a request using an authenticated role, review if your user is signed in before making the request.

If you intend to make a request using an unauthenticated role or also known as "guest access", verify if "Auth.Cognito.allowGuestAccess" is set to "true" in the \`Amplify.configure()\` function.`},oh={name:"NoValidAuthTokens",message:y.NO_FEDERATED_JWT,recoverySuggestion:"If you intended to make an authenticated API request, review if the current user is signed in."},oy={name:"NoSignedUser",message:y.NO_CURRENT_USER,recoverySuggestion:"Review the underlying exception field for more details. If you intended to make an authenticated API request, review if the current user is signed in."},om={name:"NoAuthorizationHeader",message:y.NO_AUTH_TOKEN,recoverySuggestion:'The API request was made with `authMode: "lambda"` but no `authToken` is set. Review if a valid authToken is passed into the request options or in the `Amplify.configure()` function.'},og={name:"NoEndpoint",message:"No GraphQL endpoint configured in `Amplify.configure()`.",recoverySuggestion:"Review if the GraphQL API endpoint is set in the `Amplify.configure()` function."},ob=e=>({data:{},errors:[new t3(e.message,null,null,null,null,e)]});async function ov(e,t,n,r={}){let i={};switch(t){case"apiKey":if(!n)throw new os(od);i={"X-Api-Key":n};break;case"iam":if(void 0===(await e.Auth.fetchAuthSession()).credentials)throw new os(of);break;case"oidc":case"userPool":{let t;try{t=(await e.Auth.fetchAuthSession()).tokens?.accessToken.toString()}catch(e){throw new os({...oy,underlyingError:e})}if(!t)throw new os(oh);i={Authorization:t};break}case"lambda":if("object"==typeof r&&!r.Authorization)throw new os(om);i={Authorization:r.Authorization}}return i}let oE=e=>"function"!=typeof e;class oS{constructor(){this.appSyncRealTime=new Map,this._api={post:io,cancelREST:is,isCancelErrorREST:n2,updateRequestToBeCancellable:ia}}getModuleName(){return"InternalGraphQLAPI"}getGraphqlOperationType(e){let[{operation:t}]=nf(e).definitions;return t}graphql(e,{query:t,variables:n={},authMode:r,authToken:i,endpoint:o,apiKey:s},a,c){let u="string"==typeof t?nf(t):nf(nv(t)),[l={}]=u.definitions.filter(e=>"OperationDefinition"===e.kind),{operation:p}=l,d=a||{};switch(p){case"query":case"mutation":{let t;let a=new AbortController;return t=oE(e)?this._graphql(e,{query:u,variables:n,authMode:r,apiKey:s,endpoint:o},d,a,c,i):e(async e=>await this._graphql(e,{query:u,variables:n,authMode:r,apiKey:s,endpoint:o},d,a,c,i)),this._api.updateRequestToBeCancellable(t,a),t}case"subscription":return this._graphqlSubscribe(e,{query:u,variables:n,authMode:r,apiKey:s,endpoint:o},d,c,i);default:throw Error(`invalid operation type: ${p}`)}}async _graphql(e,{query:t,variables:n,authMode:r,endpoint:i,apiKey:o},s={},a,c,u){var l;let p,d,f;let{apiKey:h,region:y,endpoint:m,customEndpoint:g,customEndpointRegion:b,defaultAuthMode:v}=ou(e),E=r||v||"iam",S="identityPool"===E?"iam":E,{headers:T,withCredentials:N}=ol(e);if("function"==typeof s){let e={method:"POST",url:new nR(i||g||m||"").toString(),queryString:nv(t)};p=await s(e)}else p=s;u&&(p={...p,Authorization:u});let A=await ov(e,S,o??h,p),O={...!g&&A,...g&&(b?A:{})||{},...T&&await T({query:nv(t),variables:n}),...p,...!g&&{"x-amz-user-agent":nH(c)}},w={query:nv(t),variables:n||null};d=g&&!b||"oidc"!==S&&"userPool"!==S&&"iam"!==S&&"lambda"!==S?void 0:{service:b?"execute-api":"appsync",region:b||y};let _=i||g||m;if(!_)throw ob(new os(og));try{let{body:t}=await this._api.post(e,{url:new nR(_),options:{headers:O,body:w,signingServiceInfo:d,withCredentials:N},abortController:a});f=await t.json()}catch(e){if(this.isCancelError(e))throw e;f=ob(e)}if((l=f)&&Array.isArray(l.errors)&&l.errors.length>0)throw op(f);return f}isCancelError(e){return this._api.isCancelErrorREST(e)}cancel(e,t){return this._api.cancelREST(e,t)}_graphqlSubscribe(e,{query:t,variables:n,authMode:r,apiKey:i,endpoint:o},s={},a,c){let u=ou(e),l=r||u?.defaultAuthMode||"iam",{headers:p}=ol(e),f=o??u?.endpoint,h=f??"none",y=this.appSyncRealTime.get(h)??new oo;return this.appSyncRealTime.set(h,y),y.subscribe({query:nv(t),variables:n,appSyncGraphqlEndpoint:f,region:u?.region,authenticationType:"identityPool"===l?"iam":l,apiKey:i??u?.apiKey,additionalHeaders:s,authToken:c,libraryConfigHeaders:p},a).pipe(function e(t){return d(function(n,r){var i,o,s=null,a=!1;s=n.subscribe(new eh(r,void 0,void 0,function(i){o=nC(t(i,e(t)(n))),s?(s.unsubscribe(),s=null,o.subscribe(r)):a=!0},void 0)),a&&(s.unsubscribe(),s=null,o.subscribe(r))})}(e=>{if(e.errors)throw op(e);throw e}))}}new oS;class oT extends oS{getModuleName(){return"GraphQLAPI"}graphql(e,t,n){let r={category:g.API,action:E.GraphQl};if(eF in t){let{[eF]:i,...o}=t;return super.graphql(e,o,n,{...r,...i})}return super.graphql(e,t,n,{...r})}isCancelError(e){return super.isCancelError(e)}cancel(e,t){return super.cancel(e,t)}}let oN=new oT;function oA(e,t){let n=tB(this),r=n.endpoint,i=n.authMode,o=n.apiKey;if(e.authMode=e.authMode||i,e.apiKey=e.apiKey??o,e.authToken=e.authToken||n.authToken,r&&"apiKey"===e.authMode&&!e.apiKey)throw Error("graphql() requires an explicit `apiKey` for a custom `endpoint` when `authMode = 'apiKey'`.");let s=t||n.headers;return oN.graphql(n.amplify,{...e,endpoint:r},s)}function oO(e,t){return oN.cancel(e,t)}function ow(e){return oN.isCancelError(e)}let o_=e=>{l.listen("core",t=>{if("configure"!==t.payload.event)return;let n=t.payload.data.API?.GraphQL;void 0!==n&&tP(e,n,tB)})},oI=new Proxy({},{get(){throw Error("Client could not be generated. This is likely due to `Amplify.configure()` not being called prior to `generateClient()` or because the configuration passed to `Amplify.configure()` is missing GraphQL provider configuration.")}});function oC(e){return function(e){let t={[tL]:e.amplify,[tM]:e.authMode,[tU]:e.authToken,[tj]:"apiKey"in e?e.apiKey:void 0,[t$]:"endpoint"in e?e.endpoint:void 0,[tF]:e.headers,graphql:oA,cancel:oO,isCancelError:ow,models:oI,enums:oI,queries:oI,mutations:oI,subscriptions:oI},n=e.amplify.getConfig().API?.GraphQL;if(t[t$]){if(!t[tM])throw Error("generateClient() requires an explicit `authMode` when `endpoint` is provided.");if("apiKey"===t[tM]&&!t[tj])throw Error("generateClient() requires an explicit `apiKey` when `endpoint` is provided and `authMode = 'apiKey'`.")}return t[t$]||(void 0!==n?tP(t,n,tB):o_(t)),t}({...e||{},amplify:i3})}}};